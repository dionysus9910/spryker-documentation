<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditionTagExpression="include[Default.ML or Default.MS]" style="mc-master-page: url('../../../Resources/MasterPages/OtherTopics.flmsp');" MadCap:conditions="Spryker.MultiLanguage,Spryker.MultiStore,Spryker.ShopSuite,Spryker.DemoShop,Spryker.B2C,Spryker.B2B">
    <head><title>Product Bundles | Spryker</title>
        <meta name="description" content="With the Product Bundles feature you can freely tie individual items together and sell them as a package." />
    </head>
    <body>
        <h1>Product Bundles <img src="../../../Resources/Images/shoptype/B2B_Shop.png" /> <img src="../../../Resources/Images/shoptype/B2C_Shop.png" /> <img src="../../../Resources/Images/shoptype/MasterSuite.png" /> <img src="../../../Resources/Images/shoptype/Demoshop.png" /></h1>
        <p>
            <MadCap:popup>
                <MadCap:popupHead>ML</MadCap:popupHead>
                <MadCap:popupBody>Multi-language</MadCap:popupBody>
            </MadCap:popup> <MadCap:popup><MadCap:popupHead>MS</MadCap:popupHead><MadCap:popupBody>Multi-store</MadCap:popupBody></MadCap:popup></p>
        <p>With the Product Bundles feature you can freely tie individual items together and sell them as a package. As opposed to a set, in which products are loosely grouped, the items in a bundle are always sold together. You can choose to create a special bundle price to make the purchase more attractive. 
Since each bundle's product is still handled like an individual item in the Order Management Process, bundle availability is always calculated and displayed based on the item with the smallest available stock to avoid overselling.</p>
        <p>A bundle represents two or more products, sold as a set; it is a distinct product that incorporates other concrete products.</p>
        <div class="example">
            <p>Example:</p>
            <p>
                <img src="../../../Resources/Images/product_bundles.png" title="Click me" alt="Product bundles" class="Thumbnail">
                </img>
            </p>
        </div>
        <p MadCap:conditions="General.Image_Source">https://www.gliffy.com/go/share/image/sbechvk3e9nyr6puu2vs.png?utm_medium=live-embed&amp;utm_source=custom</p>
        <p>Bundles are handled in different ways: For example, a marketing bundle of two items that gives a 20% discount is purchased as a single item and then split for processing into its two constituent items. Another scenario is when products are put together from separate purchase items, for example when tires and rims are sold as separate items and then delivered assembled as wheels.</p>
        <ul>
            <li> A bundle can contain multiple quantities of the same item
</li>
            <li> The availability of a bundle product is equal to the item with the lowest availability
</li>
        </ul>
        <h1>Product-Bundle Module</h1>
        <p MadCap:conditions="General.Hidden Comment">Used to be http://spryker.github.io/core/bundles/product-bundles/</p>
        <p>Product bundles are two or more existing products combined into a new type of product for the sole purpose to be displayed as one product in the shop frontend and to be sold together. Typically the products are concrete products, because both need to be potential order items. The new (bundled) product does not physically exist in the bundled state. The Product-Bundle can be bought by customers, but in the order management system the items are handled separately, this way the shop owner can manage the products separately.</p>
        <h2>Characteristics of Product Bundles</h2>
        <ul>
            <li class="bullet_list">The quantity of each concrete product may be more than 1</li>
            <li class="bullet_list">A product bundle has a localized name and description</li>
            <li class="bullet_list">A product bundle has a sku</li>
            <li class="bullet_list">A product bundle has a price and tax set</li>
            <li class="bullet_list">A product bundle has a virtual stock that is dependent on the stock of the bundled products</li>
            <li class="bullet_list">The stock level has a upper boundary (see Stock calculation)</li>
            <li class="bullet_list">A product bundle can have attributes with localized values</li>
            <li class="bullet_list">A product bundle can have localized SEO information</li>
            <li class="bullet_list">A product bundle can have multiple localized image sets</li>
        </ul>
        <h2>Product Bundle Entity Relationship Diagram</h2>
        <p>
            <img src="../../../Resources/Images/product_bundles_entity_diagram.png" title="Click me" alt="product bundle entity relationship diagram" class="Thumbnail">
            </img>
        </p>
        <p MadCap:conditions="General.Image_Source">https://www.gliffy.com/go/share/image/sbgn2oqxok413ka02d62.png?utm_medium=live-embed&amp;utm_source=custom</p>
        <h2>Availability Calculation</h2>
        <p>Bundle availability is calculated from bundled product availability. When bundled product availability is changed, for example state machine move through reserved flags then all bundles is updated accordingly.</p>
        <p>Bundle is updated when:</p>
        <ul>
            <li class="bullet_list">Stock of bundled product is changed.</li>
            <li class="bullet_list">Availability of bundled product is changed.</li>
            <li class="bullet_list">When creating bundle.</li>
            <li class="bullet_list">Adding new bundled products to bundle.</li>
            <li class="bullet_list">When state machine sets flag reserved to bundled product.</li>
        </ul>
        <h2>Stock Calculation</h2>
        <p>Bundle have "dynamic stock", the stock is defined by bundled products. It cannot be imported as regular products. That means a bundle will get maximum possible stock quantity based on bundled product quantity. Stock is calculated for each warehouse separately.</p>
        <div class="example">
            <p>For example.</p>
            <ul>
                <li>Bundled item 1 quantity x <b>2</b></li>
            </ul>
            <p>For given item stock is:</p>
            <ul>
                <li>In Warehouse <b>1: Item 1 stock x 10</b></li>
                <li>In Warehouse 2: <b>Item 1 stock x 5</b></li>
            </ul>
            <p>Then product bundle stock is:</p>
            <ul>
                <li>Warehouse 1: <b>Bundle stock x 5</b></li>
                <li>Warehouse 2: <b>Bundle stock x 2</b></li>
            </ul>
        </div>
        <h2>Product Bundle Structure in Cart</h2>
        <p>Because of changed structure, cart uses special Yves class to handle bundle operations <var>ProductBundleAwareCartOperationHandler</var>.</p>
        <p>When bundle item added to cart there is additional <var>ExpandBundleItemsPlugin</var> cart expander plugin which extracts bundled items from given bundle SKU.</p>
        <div class="example"><p>For example:</p>
        <p>Item with SKU “123” is added to cart, expander will look if this item is bundle. If it’s bundle then it will read all bundled items from persistence. Item with SKU “123” is then added to <var>QuoteTransfer:bundleItems</var>. This item is given special <var>ItemTransfer:bundleItemIdentifier</var> unique id which have each bundle in cart. At the same time bundled items are created and stored into <var>CartChangeTransfer:items</var> with referenced bundled identifier <var>ItemTransfer:relatedBundleItemIdentifier</var> this is the same id where bundle got assigned. This helps to track back belonging bundle items in quote object.</p>
        <p>If bundled items have quantity &gt; 1 then it will be split as separate items in cart.</p></div>
        <p><var>BundleProduct</var> have price this price, it is distributed to whole bundled items. Overwriting original product price. If bundle have price 100, and there is 3 bundled products, each will get price 33,34,33 distributed, 34 is to cover rounding error.</p>
        <h2>Persisting When Placing Order, End of Checkout</h2>
        <p>Bundle product information is stored to <var>spy_sales_order_item_bundle</var>. When order is placed in order detail page you will see all bundled items stored as separate row. This allows process state machine separately for each item, for example (ship, refund, return, etc..).</p>
        <p>If bundled item moves to reserved state machine state then corresponding bundle availability will be updated also.</p>
        <p>&#160;</p>
    </body>
</html>