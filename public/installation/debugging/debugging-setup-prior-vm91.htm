<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="4" MadCap:lastHeight="2976" MadCap:lastWidth="1487" style="">
    <head>
    </head>
    <body>
        <h1>Debugging Setup for VM Prior Version 91</h1>
        <p MadCap:conditions="General.Hidden Comment">Used to be: http://spryker.github.io/getting-started/installation/debugging-setup-prior-vm91/</p>
        <p class="note">To configure debugging for the current VM, <a href="debugging-setup.htm">click here</a>.</p>
        <p>This article describes how to setup debugging in your development environment for VM prior verion 91.

</p>
        <p>Install Xdebug module
</p>
        <p>If you don’t have the file <var>/etc/php5/mods-available/xdebug.ini</var> then you might be missing the Xdebug module on the virtual machine. </p>
        <p>To install it, please run the following command:

</p><pre><code class="language-PHP line-numbers">sudo -i apt-get install php5-xdebug
</code></pre>
        <h2>Enabling Xdebug
</h2>
        <p>1. <b>Make sure that Xdebug is enabled in your php.ini file</b></p>
        <p>
In your virtual machine, navigate to <var>/etc/php5/mods-available/xdebug.ini </var>and set:

</p><pre><code class="language-PHP line-numbers"> xdebug.remote_enable=1
 xdebug.remote_host=10.10.0.1
 # This is needed to prevent max recursion exeception when Twig templates are very complicated
 xdebug.max_nesting_level=1000
</code></pre>
        <p>2. <b>Export Xdebug config
</b></p>
        <p>Run the following command from the command line or add it to you <var>~/.profile</var>.

</p><pre><code class="language-PHP line-numbers">
 export XDEBUG_CONFIG='idekey=PHPSTORM' 
</code></pre>
        <p>3. <b>Restart PHP</b><![CDATA[
]]></p>
        <p>Run the following command from the command line:

</p><pre><code class="language-PHP line-numbers">sudo /etc/init.d/php5-fpm restart
</code></pre>
        <p>You should get this for a successful restart: [ ok ] Restarting php5-fpm (via systemctl): php5-fpm.service.

</p>
        <p>4. <b>Define servers in PHPStorm</b><![CDATA[
]]></p>
        <p>In PHPStorm go to Settings (Preferences-&gt;Languages &amp; Frameworks)-&gt;PHP-&gt;Servers Add a new Server using (+) with the following values:

</p>
        <ul>
            <li class="bullet_list">Name: <var>zed.de.demoshop.local</var><![CDATA[
]]></li>
            <li class="bullet_list">Host: <var>zed.de.demoshop.local
</var></li>
            <li class="bullet_list">Check “Use path mappings”
</li>
            <li class="bullet_list">Set “Absolute path on server” to: <var>/data/shop/development/current</var></li>
        </ul>
        <p>
            <img src="../../Resources/Images/define-Servers-Php-Storm.png" title="Define Servers PhpStorm" alt="Define Servers PhpStorm" MadCap:mediastyle="@media print { width: auto;height: auto; }" style="width: auto; height: auto;" class="Thumbnail" />
        </p>
        <p>
For Yves, add another one using <var>www.de.demoshop.local</var> as Name and Host.

</p>
        <p>5. <b>Configure Debugger
</b></p>
        <p>In PHPStorm, go to: Settings (Preferences-&gt;Languages &amp; Frameworks)-&gt;PHP-&gt;Debug -&gt; Under External connections increase Max. simultaneous connections to 2.

</p>
        <p>This is necessary to allow debugging Zed through a connection from Yves.
</p>
        <h2>Debugging
</h2>
        <p>1. <b>Debugging from PHPStorm</b>:</p>
        <ul>
            <li class="bullet_list">Go to Run-&gt;Edit Configurations…
</li>
            <li class="bullet_list">Add a PHP Remote Debug using (+)
</li>
            <li class="bullet_list">Name: any name you like
</li>
            <li class="bullet_list">Servers: <var>zed.de.demoshop.local
</var></li>
            <li class="bullet_list">Ide Key(session id): PHPSTORM
</li>
        </ul>
        <p>
            <img src="../../Resources/Images/debugging-Php-Storm.png" title="Debugging from PHPStorm" alt="Debugging from PHPStorm" class="Thumbnail" />
        </p>
        <ul>
            <li class="bullet_list">Click on Listen for PHP Debug Connections button (in the picture)
</li>
            <li class="bullet_list">Click on Debug button (in the picture), you should get the message: “Waiting for incoming connection with ice key ‘PHPSTORM’”
</li>
        </ul>
        <p>&#160;</p>
        <p>2. <b>Debugging Console Commands</b>:
</p>
        <p>Add:</p><pre><code class="language-PHP line-numbers">XDEBUG_CONFIG="remote_host=10.10.0.1" PHP_IDE_CONFIG="serverName=zed.de.demoshop.local"
</code></pre>
        <p>in front of vendor/bin/console &lt;command&gt;.

</p>
        <MadCap:snippetBlock src="../../Resources/Snippets/xdebuggooglechrome.flsnp" />
    </body>
</html>