<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="ReleaseVersions.2018-10">
    <head><title>DocumentationGeneratorRestApi Feature Integration | Spryker</title>
        <link href="../../Resources/TableStyles/PatternedRows2.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="This guide will navigate you through the process of installing and configuring the DocumentationGeneratorRestApi feature in Spryker OS." />
    </head>
    <body>
        <h1>DocumentationGeneratorRestApi Feature Integration</h1>
        <MadCap:menuProxy data-mc-skin="/Project/Skins/SideMenuNotFixed.flskn" mc-linked-toc="$topicHeadings" style="mc-context-sensitive: True;mc-include-parent: True;mc-include-siblings: True;mc-include-children: True;" />
        <h2>Install Feature API</h2>
        <h3>Prerequisites</h3>
        <p>To start feature integration, overview and install the necessary features:</p>
        <div class="table-wrap">
            <table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0">
                <thead>
                    <tr class="TableStyle-PatternedRows2-Head-Header1">
                        <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Name</th>
                        <th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Version</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-PatternedRows2-Body-LightRows">
                        <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Spryker Core</td>
                        <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">2018.12.0</td>
                    </tr>
                    <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                        <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">Glue Application</td>
                        <td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows">2018.12.0</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <h3>1) Install the Required Modules Using Composer</h3>
        <p>Run the following command to install the required modules:</p><pre><code class="language-PHP">composer require spryker/documentation-generator-rest-api:"^1.2.0" spryker/documentation-generator-rest-api-extension:"^1.0.0" --update-with-dependencies</code></pre>
        <div class="tip">Make sure that the following modules are installed:
		<div class="table-wrap"><table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0"><thead><tr class="TableStyle-PatternedRows2-Head-Header1"><th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Module</th><th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Expected directory</th></tr></thead><tbody><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>DocumentationGeneratorRestApi</var></td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>vendor/spryker/documentation-generator-rest-api</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows"><var>DocumentationGeneratorRestApiExtension</var></td><td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows"><var>vendor/spryker/documentation-generator-rest-api-extension</var></td></tr></tbody></table></div></div>
        <h3>2) Set up Transfer objects</h3>
        <p>Run the following command to generate transfer changes:</p><pre><code class="language-PHP">console transfer:generate</code></pre>
        <div class="tip">Make sure that the following changes are present in transfer objects:<![CDATA[			]]><div class="table-wrap"><table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0"><thead><tr class="TableStyle-PatternedRows2-Head-Header1"><th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Transfer</th><th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Type</th><th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Event</th><th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Path</th></tr></thead><tbody><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>PathMethodDataTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/PathMethodDataTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>PathParameterTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/PathParameterTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>PathSchemaDataTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/PathSchemaDataTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>SchemaDataTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/SchemaDataTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>SchemaPropertyTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/SchemaPropertyTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>SecuritySchemeTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/SecuritySchemeTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>PathMethodComponentTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/PathMethodComponentTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>PathParameterComponentTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/PathParameterComponentTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>PathRequestComponentTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/PathRequestComponentTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>PathRequestComponentTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/PathRequestComponentTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>PathResponseComponentTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/PathResponseComponentTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>SchemaComponentTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/SchemaComponentTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>SchemaPropertyComponentTransfer<![CDATA[
						]]></var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/SchemaPropertyComponentTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>SecuritySchemeComponentTransfer<![CDATA[
						]]></var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/SecuritySchemeComponentTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>PathAnnotationsTransfer<![CDATA[
						]]></var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/PathAnnotationsTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows"><var>AnnotationTransfer<![CDATA[
		]]></var></td><td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/AnnotationTransfer</var></td></tr></tbody></table></div></div>
        <h3>3) Set up behavior</h3>
        <h4>Configure REST attributes transfers</h4>
        <p>Update all the needed <var>RestAttributes</var> transfer objects definitions on the project level to add <var>restRequestParameter</var> to the properties that should be included in the request object for the endpoint.&#160;For example: </p><pre><code class="language-PHP line-numbers">&lt;transfer name="RestAccessTokensAttributes"&gt;
    &lt;property name="username" type="string" restRequestParameter="required" /&gt;
    &lt;property name="password" type="string" restRequestParameter="required" /&gt;
    &lt;property name="tokenType" type="string" /&gt;
    &lt;property name="expiresIn" type="string" /&gt;
    &lt;property name="accessToken" type="string" /&gt;
    &lt;property name="refreshToken" type="string" /&gt;
&lt;/transfer&gt;</code></pre>
        <p><var>restRequestParameter</var> can accept one of the three values:</p>
        <ul>
            <li>required - property will be marked as required in the request body schema.</li>
            <li>yes - property will be marked as optional in the request body schema.</li>
            <li>no - property will be skipped in the request body schema.</li>
        </ul>
        <p>By default, every property is considered as not needed and will be skipped in the schema definition.</p>
        <p>Run the following command to generate the transfer changes:</p><pre><code class="language-PHP line-numbers">console transfer:generate</code></pre>
        <div class="tip">Make sure that the generated transfers have adefined property in metadata with the correct value, for example:<br /><b><var>src/Generated/Shared/Transfer/RestAccessTokensAttributesTransfer.php</var></b><br /><pre><code class="language-PHP line-numbers">self::PASSWORD =&gt; [
    'type' =&gt; 'string',
    'name_underscore' =&gt; 'password',
    'is_collection' =&gt; false,
    'is_transfer' =&gt; false,
    'rest_request_parameter' =&gt; 'required',
    'is_nullable' =&gt; false,
],
self::TOKEN_TYPE =&gt; [
    'type' =&gt; 'string',
    'name_underscore' =&gt; 'token_type',
    'is_collection' =&gt; false,
    'is_transfer' =&gt; false,
    'rest_request_parameter' =&gt; 'no',
    'is_nullable' =&gt; false,
],</code></pre></div>
        <h4>Configure additional specification data for your actions</h4>
        <p>You may need to add annotations to the endpoint's controller actions to generate more accurate documentation. Annotations are written in the JSON format. For example:</p><pre><code class="language-PHP line-numbers">/**
 * @Glue({
 *     "getResource": {
 *          "summary": [
 *              "Summary example."
 *          ],
 *          "parameters": [
 *              {
 *                  name: "Accept-Language",
 *                  in: "header",
 *              },
 *              {
 *                  name: "X-Anonymous-Customer-Unique-Id",
 *                  in: "header",
 *                  required: true,
 *                  description: "Guest customer unique ID"
 *              },
 *          ],
 *          "responses": {
 *              "400": "Bad Response.",
 *              "404": "Item not found.",
 *          }
 *     }
 * })
 * ...
 */
public function getAction(RestRequestInterface $restRequest)</code></pre>
        <p>The annotation object should consist of a top-level object with one property that represents the request method used. It can be one of these:</p>
        <ul>
            <li>getCollection, getResource - for the GET requests</li>
            <li>post, patch, delete - respectively for the POST, PATCH, DELETE requests</li>
        </ul>
        <p>Currently supported annotation properties:</p>
        <ul>
            <li>summary - summary of an endpoint. If not specified, summary will be generated from the resource type.</li>
            <li>parameters - parameters that can be passed with the request. (see https://swagger.io/specification/#parameterObject).</li>
            <li>responses - all the possible response codes and their descriptions for a given endpoint.</li>
            <li>responseClass - defines a custom transfer class that represents a response object (in cases when the request and response objects are different); FQCN needed.</li>
            <li>isEmptyResponse - should be set to true when a method does not have a response body (no need to set it in the delete methods as they have an empty response body by default)</li>
        </ul>
        <h4>Enable console command</h4>
        <p>Activate the following plugin:</p>
        <div class="table-wrap">
            <table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0">
                <thead>
                    <tr class="TableStyle-PatternedRows2-Head-Header1">
                        <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Plugin</th>
                        <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Specification</th>
                        <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Prerequisites</th>
                        <th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Namespace</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-PatternedRows2-Body-LightRows">
                        <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows"><var>GenerateRestApiDocumentationConsole</var>
                        </td>
                        <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows">	Registers the rest-api:generate:documentation console command.</td>
                        <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows">None</td>
                        <td class="TableStyle-PatternedRows2-BodyA-Regular-LightRows"><var>Spryker\Zed\DocumentationGeneratorRestApi\Communication\Console</var>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p style="font-weight: bold;"><var>src/Pyz/Zed/Console/ConsoleDependencyProvider.php</var>
        </p><pre><code class="language-PHP line-numbers">&lt;?php
  
namespace Pyz\Zed\Console;
 
use Spryker\Zed\Console\ConsoleDependencyProvider as SprykerConsoleDependencyProvider;
use Spryker\Zed\DocumentationGeneratorRestApi\Communication\Console\GenerateRestApiDocumentationConsole;
  
class ConsoleDependencyProvider extends SprykerConsoleDependencyProvider
{
    /**
     * @param \Spryker\Zed\Kernel\Container $container
     *
     * @return \Symfony\Component\Console\Command\Command[]
     */
    protected function getConsoleCommands(Container $container)
    {
        $commands = [
            new GenerateRestApiDocumentationConsole(),
        ];
  
        return $commands;
    }
}</code></pre>
        <div class="tip">To verify that <var>GenerateRestApiDocumentationConsole</var> is activated, check whether the <var>vendor/bin/console rest-api:generate:documentation</var> console command exists.</div>
        <h4>Enable documentation generator</h4>
        <p>Activate the following plugins:</p>
        <div class="table-wrap">
            <table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0">
                <thead>
                    <tr class="TableStyle-PatternedRows2-Head-Header1">
                        <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Plugin</th>
                        <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Specification</th>
                        <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Prerequisites</th>
                        <th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Namespace</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-PatternedRows2-Body-LightRows">
                        <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>ResourceRoutePluginsProviderPlugin</var>
                        </td>
                        <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Registers the enabled ResourceRoute plugins.</td>
                        <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">None</td>
                        <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>Spryker\Glue\GlueApplication\Plugin\DocumentationGeneratorRestApi</var>
                        </td>
                    </tr>
                    <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                        <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows"><var>ResourceRelationshipCollectionProviderPlugin</var>
                        </td>
                        <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">Registers the enabled ResourceRelationship plugin collections.</td>
                        <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">None</td>
                        <td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows"><var>Spryker\Glue\GlueApplication\Plugin\DocumentationGeneratorRestApi</var>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p style="font-weight: bold;"><var>src/Pyz/Zed/DocumentationGeneratorRestApi/DocumentationGeneratorRestApiDependencyProvider.php</var>
        </p><pre><code class="language-PHP line-numbers">&lt;?php
 
namespace Pyz\Zed\DocumentationGeneratorRestApi;
 
use Spryker\Glue\GlueApplication\Plugin\DocumentationGeneratorRestApi\ResourceRelationshipCollectionProviderPlugin;
use Spryker\Glue\GlueApplication\Plugin\DocumentationGeneratorRestApi\ResourceRoutePluginsProviderPlugin;
use Spryker\Zed\DocumentationGeneratorRestApi\DocumentationGeneratorRestApiDependencyProvider as SprykerDocumentationGeneratorRestApiDependencyProvider;
 
class DocumentationGeneratorRestApiDependencyProvider extends SprykerDocumentationGeneratorRestApiDependencyProvider
{
    /**
     * @return \Spryker\Glue\DocumentationGeneratorRestApiExtension\Dependency\Plugin\ResourceRoutePluginsProviderPluginInterface[]
     */
    protected function getResourceRoutePluginProviderPlugins(): array
    {
        return [
            new ResourceRoutePluginsProviderPlugin(),
        ];
    }
 
    /**
     * @return \Spryker\Glue\DocumentationGeneratorRestApiExtension\Dependency\Plugin\ResourceRelationshipCollectionProviderPluginInterface[]
     */
    protected function getResourceRelationshipCollectionProviderPlugins(): array
    {
        return [
            new ResourceRelationshipCollectionProviderPlugin(),
        ];
    }
}</code></pre>
        <p>&#160;</p>
        <p><i>Last review date: Feb 25, 2019</i> <MadCap:conditionalText MadCap:conditions="General.Hidden Comment">by Anton Khabiuk
 and Dmitry Beirak</MadCap:conditionalText></p>
    </body>
</html>