<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="ReleaseVersions.2018-10">
    <head><title>Glue Application Feature Integration | Spryker</title>
        <link href="../../Resources/TableStyles/PatternedRows2.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="This guide will navigate you through the process of installing and configuring the Glue Application feature in Spryker OS." />
    </head>
    <body>
        <h1>Glue Application Feature Integration</h1>
        <MadCap:menuProxy data-mc-skin="/Project/Skins/SideMenuNotFixed.flskn" mc-linked-toc="$topicHeadings" style="mc-context-sensitive: True;mc-include-parent: True;mc-include-siblings: True;mc-include-children: True;" />
        <h2>Install Feature API</h2>
        <h3>Prerequisites</h3>
        <p>To start feature integration, overview and install the necessary features:</p>
        <div class="table-wrap">
            <table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0">
                <thead>
                    <tr class="TableStyle-PatternedRows2-Head-Header1">
                        <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Name</th>
                        <th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Version</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="TableStyle-PatternedRows2-Body-LightRows">
                        <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows">Spryker Core</td>
                        <td class="TableStyle-PatternedRows2-BodyA-Regular-LightRows">2018.12.0</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <h3>1) Install the Required Modules Using Composer</h3>
        <p>Run the following command to install the required modules:</p><pre><code class="language-PHP">composer require spryker/glue-application:"^1.9.1" spryker/glue-application-extension:"^1.1.0" --update-with-dependencies</code></pre>
        <div class="tip">Make sure that the following modules are installed:
		<div class="table-wrap"><table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0"><thead><tr class="TableStyle-PatternedRows2-Head-Header1"><th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Module</th><th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Expected directory</th></tr></thead><tbody><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>GlueApplication</var></td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>vendor/spryker/glue-application</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows"><var>GlueApplicationExtension</var></td><td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows"><var>vendor/spryker/glue-application-extension</var></td></tr></tbody></table></div></div>
        <h3>2) Set up Configuration</h3>
        <p class="info">GLUE_APPLICATION_DOMAIN should be configured for every domain used in project.</p>
        <p>Add the required parameters to <var>config/Shared/config_default.php</var>:</p><pre><code class="language-PHP">$config[GlueApplicationConstants::GLUE_APPLICATION_DOMAIN] = 'http://glue.example.com';
$config[GlueApplicationConstants::GLUE_APPLICATION_REST_DEBUG] = false;</code></pre>
        <h3>3) Set up Transfer objects</h3>
        <p>Run the following command to generate transfer objects:</p><pre><code class="language-PHP">console transfer:generate</code></pre>
        <div class="tip">Make sure that the following changes are present in transfer objects:<![CDATA[			]]><div class="table-wrap"><table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0"><thead><tr class="TableStyle-PatternedRows2-Head-Header1"><th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Transfer</th><th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Type</th><th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Event</th><th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Path</th></tr></thead><tbody><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>RestPageOffsetsTransfer</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/RestPageOffsetsTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>RestErrorMessageTransfer		</var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/RestErrorMessageTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-LightRows"><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>RestErrorCollectionTransfer<![CDATA[	]]></var></td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">class</td><td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">created</td><td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>src/Generated/Shared/Transfer/RestErrorCollectionTransfer</var></td></tr><tr class="TableStyle-PatternedRows2-Body-DarkerRows"><td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows"><var>RestVersionTransfer<![CDATA[	]]></var></td><td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">class</td><td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">created</td><td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows"><var>src/Generated/Shared/Transfer/RestVersionTransfer</var></td></tr></tbody></table></div></div>
        <h3>4) Set up Behavior</h3>
        <h4>Set up front controller</h4>
        <p>Activate the following plugins:</p>
        <table style="mc-table-style: url('../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0">
            <thead>
                <tr class="TableStyle-PatternedRows2-Head-Header1">
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Plugin</th>
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Specification</th>
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Prerequisites</th>
                    <th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Namespace</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>GlueResourceBuilderService</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Registers the resource builder service in the Glue application.
					</td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">None
					</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>Spryker\Glue\GlueApplication\Plugin\Rest\ServiceProvider</var>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>GlueApplicationServiceProvider						</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">Registers the pimple plugin, controller resolver and configures the debug mode in the Glue application.
					</td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">None
					</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>Spryker\Glue\GlueApplication\Plugin\Rest\ServiceProvider</var>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>SessionServiceProvider<![CDATA[					]]></var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Registers the session services in the Glue application.<![CDATA[					]]></td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">None
					</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>Silex\Provider</var>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>ServiceControllerServiceProvider<![CDATA[					]]></var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">Registers the service controller resolver in the Glue application.<![CDATA[					]]></td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">None
					</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>Silex\Provider</var>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>GlueServiceProviderPlugin<![CDATA[					]]></var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Registers the <var>onKernelController</var> event listeners in the Glue application.<![CDATA[					]]></td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">None
					</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>Spryker\Glue\GlueApplication\Plugin\Rest</var>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows"><var>GlueRoutingServiceProvider<![CDATA[					]]></var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">Registers the url matcher and router services in the Glue application.<![CDATA[
					]]></td>
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">None
					</td>
                    <td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows"><var>Spryker\Glue\GlueApplication\Plugin\Rest\ServiceProvider</var>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>Create a GlueBootstrap file for your project and register all the needed plugins:</p>
        <p><b><var>src/Pyz/Glue/GlueApplication/Bootstrap/GlueBootstrap.php</var></b>
        </p><pre><code class="language-PHP line-numbers">&lt;?php
 
namespace Pyz\Glue\GlueApplication\Bootstrap;
 
use Silex\Provider\ServiceControllerServiceProvider;
use Silex\Provider\SessionServiceProvider;
use Spryker\Glue\GlueApplication\Bootstrap\AbstractGlueBootstrap;
use Spryker\Glue\GlueApplication\Plugin\Rest\GlueServiceProviderPlugin;
use Spryker\Glue\GlueApplication\Plugin\Rest\ServiceProvider\GlueApplicationServiceProvider;
use Spryker\Glue\GlueApplication\Plugin\Rest\ServiceProvider\GlueResourceBuilderService;
use Spryker\Glue\GlueApplication\Plugin\Rest\ServiceProvider\GlueRoutingServiceProvider;
 
class GlueBootstrap extends AbstractGlueBootstrap
{
    /**
     * @return void
     */
    protected function registerServiceProviders(): void
    {
        $this-&gt;application
            -&gt;register(new GlueResourceBuilderService())
            -&gt;register(new GlueApplicationServiceProvider())
            -&gt;register(new SessionServiceProvider())
            -&gt;register(new ServiceControllerServiceProvider())
            -&gt;register(new GlueServiceProviderPlugin())
            -&gt;register(new GlueRoutingServiceProvider());
    }
}</code></pre>
        <p>Create a new entry point for the Glue Application in the <var>public/Glue</var> folder:</p>
        <p><b><var>public/Glue/index.php</var></b>
        </p><pre><code class="language-PHP line-numbers">&lt;?php
 
use Pyz\Glue\GlueApplication\Bootstrap\GlueBootstrap;
use Spryker\Shared\Config\Application\Environment;
use Spryker\Shared\ErrorHandler\ErrorHandlerEnvironment;
 
define('APPLICATION', 'GLUE');
defined('APPLICATION_ROOT_DIR') || define('APPLICATION_ROOT_DIR', realpath(__DIR__ . '/../..'));
 
require_once APPLICATION_ROOT_DIR . '/vendor/autoload.php';
 
Environment::initialize();
 
$errorHandlerEnvironment = new ErrorHandlerEnvironment();
$errorHandlerEnvironment-&gt;initialize();
 
$bootstrap = new GlueBootstrap();
$bootstrap
    -&gt;boot()
    -&gt;run();</code></pre>
        <h4>Configure web server</h4>
        <p>Configure your web server's host to have access to the freshly created front controller. If you use nginx, you can use the following configuration for your web-server:</p>
        <p><b>Nginx configuration example:</b>
        </p><pre><code class="language-PHP line-numbers">server {
    # Listener for production/staging - requires external LoadBalancer directing traffic to this port
    listen 10001;
 
    # Listener for testing/development - one host only, doesn't require external LoadBalancer
    listen 80;
 
    server_name ~^glue\\.de\\..+\\.com$;
 
    keepalive_timeout 0;
    access_log  /data/logs/development/glue-access.log extended;
 
    root /data/shop/development/current/public/Glue;
 
    set $application_env development;
    set $application_store DE;
    include "spryker/zed.conf";
}</code></pre>
        <div class="tip">
            <p>If everything has been set up correctly, you should be able to access <var>http://glue.example.com/</var> and see the correct JSON response:</p>
            <p><pre><code class="language-PHP line-numbers">{
    "errors": [
        {
            "status": 404,
            "detail": "Not Found"
        }
    ]
}</code></pre>
            </p>
        </div>
        <p>&#160;</p>
        <p><i>Last review date: Feb 25, 2019</i> <MadCap:conditionalText MadCap:conditions="General.Hidden Comment">by Anton Khabiuk and Dmitry Beirak</MadCap:conditionalText></p>
    </body>
</html>