<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="Spryker.ShopSuite,Spryker.B2C,Spryker.B2B">
    <head><title>Tutorial - Frontend - Override a Component</title>
    </head>
    <body>
        <h1>Tutorial - Frontend - Override a Component  </h1>
        <p>
            <img src="../../../Resources/Images/shoptype/B2B_Shop.png" />
            <img src="../../../Resources/Images/shoptype/B2C_Shop.png" />
            <img src="../../../Resources/Images/shoptype/MasterSuite.png" />
        </p>
        <p>If the implementation of any of the components shipped with Spryker frontend does not suite your needs, you can override it with a component of your own. The following article shows how to override a molecule called&#160;<b>simple-carousel</b>. By default, the component is used, for example, to display product suggestions at the bottom of the page:</p>
        <p>
            <img src="../../../Resources/Images/frontend/old-simple-carousel.png" />
        </p>
        <p>Let us replace the default implementation of this molecule with our own version. It will look basically the same as the default one, but we'll use a different color for the left and right arrows; the current view number will be displayed in the browser&#160;console. Also, when reaching the last image in the set, the component will no longer be reset to the first view automatically by pressing the right button.</p>
        <h2>1. Create Component Folder on Project Level</h2>
        <p>On the global level, the molecule we want to override is located in the following folder:&#160;<code>vendor/spryker-shop/shop-ui/src/SprykerShop/Yves/ShopUi/Theme/default/components/molecules/simple-carousel</code>. It is a part of the main&#160;<i>Shop UI</i> application. To override it, we need to place our implementation in the <code>Shop UI</code> folder on the project level, and also&#160;replicate the folder structure. In other words, we need to create the following folder for the component:&#160;<code>src/Pyz/Yves/ShopUi/Theme/default/components/molecules/simple-carousel</code>.</p>
        <p>Also, we need to create an entry point for Webpack. Create an empty&#160;<code>index.ts</code> file in the folder.</p>
        <h2>2. Override Component Template</h2>
        <p>The first thing we need to do is to override the Twig of the default component. To do this, we need to create a&#160;Twig file for the component on the project level. Since the project level has priority over the global level, the newly created project-side Twig will override the global one. In other words, whenever the component is used on a page, your implementation will be used instead of the default one.</p>
        <p>To override the global component, the Twig file name on the project level must be the same as on the global level. Also, component <i>name</i> and <i>tag name</i>&#160;specified in the <b>config&#160;</b>property must be the same as on the global level. In our case, the file name on the project level must be&#160;<code>simple-carousel.twig</code>, and the&#160;<b>config</b> property will look as follows:</p><pre><code class="language-Twig line-numbers">{% define config = {
    name: 'simple-carousel',
    tag: 'simple-carousel'
} %}</code></pre>
        <p>Since the new component will be used everywhere instead of the global one, it is also recommended to replicate the data contracts. For this purpose, the&#160;<b>data</b> and&#160;<b>attributes</b> properties need to be configured the same as in the source component. If you are going to change the outlook of the component only, without changing its <i>data</i> property, attributes etc, you can copy the source Twig file, and then make changes to the&#160;<b>body</b> block only. The block contains the visual layout of a component.</p>
        <p>As we are not going to change the component template, let us copy the whole of the source twig implementation (<code>vendor/spryker-shop/shop-ui/src/SprykerShop/Yves/ShopUi/Theme/default/components/molecules/simple-carousel/simple-carousel.twig</code>) to the project level (<code>src/Pyz/Yves/ShopUi/Theme/default/components/molecules/simple-carousel.twig</code>). The Twig file will look as follows:</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>simple-carousel.twig</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre><code class="language-Twig line-numbers">{% extends model('component') %}

{% define config = {
    name: 'simple-carousel',
    tag: 'simple-carousel'
} %}

{% define data = {
    slides: [],
    showDots: true
} %}

{% define attributes = {
    'slides-to-show': 1,
    'slides-to-scroll': 1
} %}

{% set slidesCount = data.slides | length %}
{% set slideWidth = 100 / attributes['slides-to-show'] %}
{% set dotsCount = (((slidesCount - attributes['slides-to-show']) / attributes['slides-to-scroll']) | round(0, 'ceil')) + 1 %}
{% set showNavigation = data.slides | length &gt; 1 %}
{% set showDots = data.showDots and dotsCount &gt; 1 %}

{#
    Insert customizations in the body of the component, if necessary
#}
{% block body %}
    &lt;div class="{{config.name}}__container"&gt;
        {% if showNavigation %}
            &lt;div class="{{config.name}}__navigation {{config.name}}__navigation--prev"&gt;
                &lt;a href="#prev" class="{{config.name}}__arrow {{config.jsName}}__prev"&gt;
                    {% include atom('icon') with {
                        modifiers: ['big'],
                        data: {
                            name: 'chevron-left'
                        }
                    } only %}
                &lt;/a&gt;
            &lt;/div&gt;
        {% endif %}

        &lt;div class="{{config.name}}__view"&gt;
            &lt;div class="{{config.name}}__slider {{config.jsName}}__slider grid grid--stretch"&gt;
                {% for slide in data.slides %}
                    &lt;div class="{{config.jsName}}__slide col" style="width:{{slideWidth}}%;min-width:{{slideWidth}}%;"&gt;
                        {% block slide %}{% endblock %}
                    &lt;/div&gt;
                {% endfor %}
            &lt;/div&gt;
            {% if showDots %}
                &lt;div class="{{config.name}}__dots"&gt;
                    {%- for dot in 1..dotsCount -%}
                        &lt;a href="#" class="{{config.name}}__dot {{config.jsName}}__dot{% if loop.first %} {{config.name}}__dot--current{% endif %}"&gt;&lt;/a&gt;
                    {%- endfor -%}
                &lt;/div&gt;
            {% endif %}
        &lt;/div&gt;

        {% if showNavigation %}
            &lt;div class="{{config.name}}__navigation {{config.name}}__navigation--next"&gt;
                &lt;a href="#next" class="{{config.name}}__arrow {{config.jsName}}__next"&gt;
                    {% include atom('icon') with {
                        modifiers: ['big'],
                        data: {
                            name: 'chevron-right'
                        }
                    } only %}
                &lt;/a&gt;
            &lt;/div&gt;
        {% endif %}
    &lt;/div&gt;
{% endblock %}</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <h2>3. Define Component Styles</h2>
        <p>The next thing to do is to provide the styles to use in the component. We need to use the mixin of the default component and add our style customization within the mixin. For this purpose, create file&#160;<code>simple-carousel.scss</code> in the project folder with the following content:</p><pre><code class="language-Css line-numbers">@include shop-ui-simple-carousel {
    color: $setting-color-alt;
}</code></pre>
        <p>With the above code, we inherit all styles of the default component, and then override the arrow color with another one.&#160;The color is taken from global configuration. It can be found&#160;in the followig folder:<code>vendor/spryker-shop/shop-ui/src/SprykerShop/Yves/ShopUi/Theme/default/styles/settings</code>.</p>
        <p>Now, we need to make the style visible for Webpack using the <code>index.ts</code> file:</p><pre><code class="language-Javascript line-numbers">// Import component style
import './simple-carousel.scss';</code></pre>
        <h2>4. Change Component Behavior</h2>
        <p>Finally, let us define what the component does. Create file&#160;<code>simple-carousel.ts</code> with the following content:</p><pre><code class="language-Javascript line-numbers">// Import the SimpleCarousel class
import SimpleCarousel from 'ShopUi/components/molecules/simple-carousel/simple-carousel';

// Export the extended class with additional behavior
export default class SimpleCarouselExtended extends SimpleCarousel {
    slide(): void {
        console.log(`Showing view number ${this.viewCurrentIndex + 1}/${this.viewsCount}!`);

        super.slide();

        // If we've reached the last image, prevent automatic transfer to the 1st one
        if (this.viewCurrentIndex + 1 === this.viewsCount) {
            this.viewCurrentIndex = this.viewCurrentIndex -1;
        }
    }
}</code></pre>
        <p>In the above example, first, we import class&#160;<b>SimpleCarousel</b> from the global level. After that, we declare and export a new class, <b>SimpleCarouselExtended</b>. Since it extends the class of the default component, it inherits all of its its behavior. The code contained inside the class adds behavior on its own.</p>
        <p class="tip">If you want to define the component behavior from scratch rather than importing the behavior of the default component, you need to extend the base&#160;<b>Component</b> class instead:
<pre><code class="language-Javascript line-numbers">import Component from 'ShopUi/models/component';

export default class SimpleCarouselExtended extends Component {
&#160; &#160; &#160; &#160; &#160;// TODO: your code here
}</code></pre></p>
        <p>After implementing the component behavior, let us bond it to the DOM element that represents the component. We need to use the same tag name as the default component, in our case, <b>simple-carousel</b>. Open the&#160;<code>index.ts</code> file again and add the following content:</p><pre><code class="language-Javascript line-numbers">// Import the 'register' function from the Shop Application
import register from 'ShopUi/app/registry';
 
// Register the component
export default register(
    'simple-carousel',
    () =&gt; import(/* webpackMode: "lazy" */'./simple-carousel')
);</code></pre>
        <h2>5. Build Frontend</h2>
        <p>Now, let us build the frontend. Run the following command in the console: <code>npm run yves</code>.</p>
        <p>As soon as&#160;<b>npm</b> finishes, you can see changes in the simple carousel component. The arrow color is changed and you cannot switch to the&#160;<b>1st</b> element after reaching the last one:</p>
        <p>
            <img src="../../../Resources/Images/frontend/new-simple-carousel.png" />
        </p>
        <p>If you open the browser&#160;console, you can see the current view number each time you press the left or the right arrow:</p>
        <p>
            <img src="../../../Resources/Images/frontend/new-carousel-console.png" />
        </p>
        <p><i>Last review date: November 19th, 2018</i>
            <MadCap:conditionalText MadCap:conditions="General.Hidden Comment"> by Volodymyr Volkov</MadCap:conditionalText>
        </p>
    </body>
</html>