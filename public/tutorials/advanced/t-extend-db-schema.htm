<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="">
    <head>
    </head>
    <body>
        <h1>Tutorial - Extending the Database Schema</h1>
        <p>
            <img src="../../Resources/Images/shoptype/B2B_Shop.png" />
            <img src="../../Resources/Images/shoptype/B2C_Shop.png" />
            <img src="../../Resources/Images/shoptype/MasterSuite.png" />
            <img src="../../Resources/Images/shoptype/Demoshop.png" />
        </p>
        <p MadCap:conditions="General.Hidden Comment">used to be: http://spryker.github.io/tutorials/zed/extending-database-schema/</p>
        <p>Fields can be added to the existing database tables, but they cannot be removed (removing fields from the tables could break the functionalities implemented in Spryker Core).</p>
        <p>As an example, we will add a description field to the spy_price_type table. The structure of this table is defined in the Price mosdule, in the spy_price.schema.xml file, as it can be seen below:</p><pre><code class="language-PHP line-numbers">&lt;table name="spy_price_type"&gt;
    &lt;column name="id_price_type" type="INTEGER" required="true" primaryKey="true" autoIncrement="true"/&gt;
    &lt;column name="name" type="VARCHAR" size="255" required="true"/&gt;
    &lt;unique&gt;
        &lt;unique-column name="name"/&gt;
    &lt;/unique&gt;
&lt;id-method-parameter value="spy_price_type_pk_seq"/&gt;&lt;/table&gt;</code></pre>
        <p>To add an additional column to this table, follow these steps :</p>
        <ul>
            <li class="bullet_list">On the project side, if it wasn’t created yet, add the corresponding xml file ( follow the same folder structure and give it the same name)</li>
        </ul><pre><code class="language-PHP line-numbers">mkdir -p src/Pyz/Zed/Price/Persistence/Propel/Schema
touch src/Pyz/Zed/Price/Persistence/Propel/Schema/spy_price.schema.xml</code></pre>
        <ul>
            <li class="bullet_list">Add the additional fields to the table definition</li>
        </ul><pre><code class="language-PHP line-numbers">&lt;?xml version="1.0"?&gt;
&lt;database xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="zed"
    xsi:noNamespaceSchemaLocation="http://static.spryker.com/schema-01.xsd"
    namespace="Orm\Zed\Price\Persistence"
    package="src.Orm.Zed.Price.Persistence"&gt;

    &lt;table name="spy_price_type"&gt;
        &lt;column name="description" type="VARCHAR" size="255" required="false"/&gt;
    &lt;/table&gt;

&lt;/database&gt;</code></pre>
        <ul>
            <li class="bullet_list">Update the database by running from the command line the following :</li>
        </ul><pre><code class="Bash">  vendor/bin/console propel:install</code></pre>
        <h2>Extending the database schema for the first time</h2>
        <p class="important">If you’re extending the database schema for the first time, make sure that the Propel schema path pattern for the project side is set in <code>PropelConfig</code>, so that the XML schema files from the project side are also grabbed when running the Propel setup command.</p><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\Propel;
 
use Spryker\Zed\Propel\PropelConfig as SprykerPropelConfig;
 
class PropelConfig extends SprykerPropelConfig
{
   /**
    * @return array
    */
   public function getPropelSchemaPathPatterns()
   {
       return array_merge(
           [APPLICATION_SOURCE_DIR.'/*/Zed/*/Persistence/Propel/Schema/'],
           parent::getPropelSchemaPathPatterns()
       );
   }
}</code></pre>
    </body>
</html>