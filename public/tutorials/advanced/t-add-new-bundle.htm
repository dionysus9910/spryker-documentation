<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="">
    <head>
    </head>
    <body>
        <h1>Tutorial - Adding a New Module</h1>
        <p>
            <img src="../../Resources/Images/shoptype/B2B_Shop.png" />
            <img src="../../Resources/Images/shoptype/B2C_Shop.png" />
            <img src="../../Resources/Images/shoptype/MasterSuite.png" />
            <img src="../../Resources/Images/shoptype/Demoshop.png" />
        </p>
        <p class="info">In this tutorial we will create a test module: HelloWorld module; the module’s functionality is to show a ‘Hello world!’ message to the user.

</p>
        <p>When a new concept needs to be defined, a new module needs to be added on the project side to encapsulate that concept. The new module needs to follow the same folder structure and conventions as the ones in Core.
</p>
        <p><b>Prerequisites</b>:</p>
        <p>To implement this functionality, it’s necessary to have an index view together with its matching controller and a HelloWorld dependency provider.</p>
        <p><b>To create a new module</b>:</p>
        <p>

Run the following commands to create the necessary files, following the folder structure conventions:</p><pre><code class="language-PHP line-numbers">mkdir -p src/Pyz/Zed/HelloWorld/Presentation/Index
touch src/Pyz/Zed/HelloWorld/Presentation/Index/index.twig

mkdir -p src/Pyz/Zed/HelloWorld/Communication/Controller
touch src/Pyz/Zed/HelloWorld/Communication/Controller/IndexController.php

touch src/Pyz/Zed/HelloWorld/HelloWorldDependencyProvider.php</code></pre>
        <p>Insert the ‘Hello world !’ message inside the view (<code>index.twig</code>) :

</p><pre><code class="language-PHP line-numbers">{% extends '@Gui/Layout/layout.twig' %}

{% block content %}
   Hello world!
{% endblock %}</code></pre>
        <p><code>IndexController</code>at the moment is empty (its index action returns an empty array) :

</p><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\HelloWorld\Communication\Controller;

use Spryker\Zed\Kernel\Communication\Controller\AbstractController;
class IndexController extends AbstractController
{
    public function indexAction()
    {
        return [];
    }
}</code></pre>
        <p>The dependency provider inherits the <code>AbstractBundleDependencyProvider</code> functionality.</p><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\HelloWorld;

use Spryker\Zed\Kernel\AbstractBundleDependencyProvider;

class HelloWorldDependencyProvider extends AbstractBundleDependencyProvider
{

}</code></pre>
        <p MadCap:conditions="Spryker.DemoShop">Requesting the URL <a href="http://zed.de.demoshop.local/hello-world" target="_blank">http://zed.de.demoshop.local/hello-world</a> will show the Hello World example.

</p>
        <h2>Displaying a random salutation message
</h2>
        <p>We can now extend this example to display a random salutation message on the screen.

For this, we’ll create a class that will contain the logic for generating the random salutation message; we’ll call it <code>MessageGenerator</code> and we will place it under the business layer.
</p>
        <p><![CDATA[
]]><b>To display a random salutation message</b>:</p>
        <table style="width: 100%;">
            <col />
            <thead>
                <tr>
                    <th style="font-weight: normal;">
                        <li style="text-align: left;">1. Implement in this class the method that will return the message:

</li>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\HelloWorld\Business;

class MessageGenerator
{
    /**
     * @return string
     */
    public function generateHelloMessage()
    {
        $helloMessages = ["Hello!","Bonjour!","Namaste!","Hallo", "Hola!", "Ciao!"];
        shuffle($helloMessages);
        return $helloMessages[0];
    }
}</code></pre>
                    </td>
                </tr>
                <tr>
                    <td>
                        <li>2. Next, add a business factory so that we can get an instance of this class in the facade:
</li>
                    </td>
                </tr>
                <tr>
                    <td><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Zed\HelloWorld\Business;

use Spryker\Zed\Kernel\Business\AbstractBusinessFactory;

class HelloWorldBusinessFactory extends AbstractBusinessFactory
{

    /**
     * @return MessageGenerator
     */
    public function createMessageGenerator()
    {
        return new MessageGenerator();
    }
}</code></pre>
                    </td>
                </tr>
                <tr>
                    <td>3. Create the <code>HelloWorldFacade</code> and call this functionality from it:</td>
                </tr>
                <tr>
                    <td><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\HelloWorld\Business;

use Spryker\Zed\Kernel\Business\AbstractFacade;

/**
 * @method \Pyz\Zed\HelloWorld\Business\HelloWorldBusinessFactory getFactory()
 */
class HelloWorldFacade extends AbstractFacade implements HelloWorldFacadeInterface
{
    /**
     * @return string
     */
    public function getSalutationMessage()
    {
         return  $this-&gt;getFactory()-&gt;createMessageGenerator()-&gt;generateHelloMessage();
    }
}</code></pre>
                    </td>
                </tr>
                <tr>
                    <td>4. Modify the controller so that it calls the method you just added to your facade:

</td>
                </tr>
                <tr>
                    <td><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\HelloWorld\Communication\Controller;

use Spryker\Zed\Kernel\Communication\Controller\AbstractController;

/**
 * @method \Pyz\Zed\HelloWorld\Business\HelloWorldFacade getFacade()
 */
class IndexController extends AbstractController
{
    /**
     * @return array
     */
    public function indexAction()
    {
        $helloMessage = $this-&gt;getFacade()-&gt;getSalutationMessage();
        return [
            'helloMessage' =&gt; $helloMessage
        ];
    }
}</code></pre>
                    </td>
                </tr>
                <tr>
                    <td>5. Modify the twig template to display the random salutation message instead of the static one we previously defined:
</td>
                </tr>
                <tr>
                    <td><pre><code class="language-PHP line-numbers">{% extends '@Gui/Layout/layout.twig' %}

{% block content %}
    {{ helloMessage }}
{% endblock %}</code></pre>
                    </td>
                </tr>
            </tbody>
        </table>
        <p MadCap:conditions="Spryker.DemoShop">We are done! <a href="http://zed.de.demoshop.local/hello-world" target="_blank">http://zed.de.demoshop.local/hello-world</a> now displays a random salutation message.</p>
    </body>
</html>