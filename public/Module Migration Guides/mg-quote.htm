<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="General.Demoshop,Spryker.B2C,Spryker.B2B">
    <head>
    </head>
    <body>
        <h1>Migration Guide - Quote <img src="../Resources/Images/shoptype/B2B_Shop.png" /> <img src="../Resources/Images/shoptype/B2C_Shop.png" /></h1>
        <h2>Upgrading from Version 1.* to Version 2.*</h2>
        <p>The new version of Quote module provides the ability to save customer quote into the database and get it.</p>
        <p>Quote storage strategy (session, database) can be changed in <var>Spryker\Shared\Quote\QuoteConfig::getStorageStrategy</var>.</p>
        <p>If you’re migrating the Quote module from version 1 to version 2,  follow the steps described below.</p>
        <p>Version 2 of the Quote module introduced a new schema.</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot><div class="drop-anchor">Perform database migration</div></MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <ul>
                    <li>run <var>`vendor/bin/console propel:diff`</var>, also manual review is necessary for the generated migration file;</li>
                    <li>run <var>`vendor/bin/console propel:migrate`</var>;</li>
                    <li>run <var>`vendor/bin/console propel:model:build`</var>.</li>
                </ul>
                <p>After running the last command you’ll find some new classes in your project under <var>\Orm\Zed\Cms\Persistence</var> namespace. It’s important to make sure that they are extending the base classes from the core, i.e.
<var>`Orm\Zed\Quote\Persistence\SpyQuote</var> extends <var>\Spryker\Zed\Quote\Persistence\Propel\AbstractSpyQuote`</var><var>`Orm\Zed\Quote\Persistence\SpyQuoteQuery</var> extends <var>Spryker\Zed\Quote\Persistence\Propel\AbstractSpyQuoteQuery.`</var></p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p>
            With this version quote storage strategies (session, database) have been added. They implement interface <var>Spryker\Client\Quote\StorageStrategy\StorageStrategyInterface</var> which extends <var>QuoteClientInterface</var>.
            Any of your changes from <var>QuoteClientInterface</var> should be implemented in <var>Spryker\Client\Quote\StorageStrategy\DatabaseStorageStrategy</var> and <var>Spryker\Client\Quote\StorageStrategy\SessionStorageStrategy</var>.
        </p>
        <p>&#160;</p>
        <p><b>See also:</b>
        </p>
        <ul>
            <li><a href="mg-cart.htm">Migrate to a newer version of Cart module</a>
            </li>
        </ul>
        <p>&#160;</p>
        <p><i>Last review date: April, 10th, 2018 </i>
            <MadCap:conditionalText MadCap:conditions="General.Hidden Comment"><i>by Dmitriy Krainiy</i>
            </MadCap:conditionalText>
        </p>
    </body>
</html>