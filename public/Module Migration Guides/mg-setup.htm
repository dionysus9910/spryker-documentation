<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="General.Demoshop,Spryker.B2C,Spryker.B2B">
    <head><title>Migration Guide - Setup</title>
    </head>
    <body>
        <h1>Migration Guide - Setup <img src="../Resources/Images/shoptype/B2B_Shop.png" /> <img src="../Resources/Images/shoptype/B2C_Shop.png" /></h1>
        <h2>Upgrading from Version 3.* to Version 4.*

</h2>
        <p>With this update the behavior of the <var>setup:install</var> command slightly changes. Instead of removing directories where generated files are stored, these directories will be kept and emptied.
</p>
        <p>
The <var>setup:install </var>command utilizes two new commands for cleaning up generated files: <var>cache:empty-all</var> and <var>setup:empty-generated-directory</var>. These two commands replace <var>cache:delete-all</var> and <var>setup:remove-generated-directory</var> which are now marked as deprecated.

</p>
        <p>The new commands need to be registered in projects in order to enable <var>setup:install</var> to run them. <var>ConsoleDependencyProvider::getConsoleCommands()</var> needs to return instances of <var>\Spryker\Zed\Setup\Communication\Console\EmptyGeneratedDirectoryConsole</var> and <var>\Spryker\Zed\Cache\Communication\Console\EmptyAllCachesConsole</var>.

</p>
        <p class="info"><strong>Deprecation Notice</strong>
            <br />As of this release the following commands have been deprecated and need to be removed <br /><var>\Spryker\Zed\Setup\Communication\Console\RemoveGeneratedDirectoryConsole </var><br /><var>\Spryker\Zed\Cache\Communication\Console\DeleteAllCachesConsole</var><![CDATA[
]]></p><pre><code class="language-PHP line-numbers">&lt;?php

namespace Pyz\Zed\Console;

use Spryker\Zed\Cache\Communication\Console\EmptyAllCachesConsole;
use Spryker\Zed\Console\ConsoleDependencyProvider as SprykerConsoleDependencyProvider;
use Spryker\Zed\Kernel\Container;
use Spryker\Zed\Setup\Communication\Console\EmptyGeneratedDirectoryConsole;

class ConsoleDependencyProvider extends SprykerConsoleDependencyProvider
{
    
    /**
     * @param \Spryker\Zed\Kernel\Container $container
     *
     * @return \Symfony\Component\Console\Command\Command[]
     */
    public function getConsoleCommands(Container $container)
    {
        $commands = [
            // ...
            new EmptyAllCachesConsole(),
            new EmptyGeneratedDirectoryConsole(),
            // ...
        ];
        
        return $commands;
    }
}</code></pre>
        <p> </p>
        <p><b>See also:</b>
        </p>
        <ul>
            <li>Checkout other Console commands</li>
        </ul>
    </body>
</html>