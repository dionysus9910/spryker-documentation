<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="General.Demoshop,Spryker.B2C,Spryker.B2B">
    <head>
    </head>
    <body>
        <h1>Migration Guide - DiscountCalculatorConnector <img src="../Resources/Images/shoptype/B2B_Shop.png" /> <img src="../Resources/Images/shoptype/B2C_Shop.png" /></h1>
        <p>Upgrading from version 4.* to version 5.*</p>
        <p>This module no longer has any calculator plugins, except the DiscountCalculatorPlugin. All other plugins were moved to the separate repository in <var>spryker/calculation-migration</var>.</p>
        <p>To learn how to migrate to the new structure see, <MadCap:xref href="mg-calculation.htm#Upgradin">Upgrading from version 3.* to version 4.*</MadCap:xref></p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot><div class="drop-anchor">Upgrading from Version 2.* to Version 3.*
</div></MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>The tax plugins are using the version 3.* of the Tax module. Upgrade <MadCap:xref href="mg-tax.htm">Tax to version 3</MadCap:xref></p>
                <p>A new tax calculator must be registered in the <var>CalculationDependencyProvider::getCalculatorStack()
</var></p>
                <p>Add <var>ExpenseTaxWithDiscountsCalculatorPlugin </var>into the discount calculator block, after DiscountCalculatorPlugin.

</p><pre><code class="language-PHP line-numbers">//..
use Spryker\Zed\DiscountCalculationConnector\Communication\Plugin;

class CalculationDependencyProvider extends SprykerCalculationDependencyProvider
{

    /**
     * @param \Spryker\Zed\Kernel\Container $container
     * @return \Spryker\Zed\Calculation\Dependency\Plugin\CalculatorPluginInterface[]
     */
    protected function getCalculatorStack(Container $container)
    {
        return [
            .... other existing plugins .....

            new ExpenseTaxWithDiscountsCalculatorPlugin(),

        ];
    }
</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p>&#160;</p>
        <p><b>See also:</b>
        </p>
        <ul>
            <li>Learn how to migrate Discount<br /></li>
            <li>Get a general idea about Discount</li>
            <li>Learn how to apply a discount</li>
            <li><a href="mg-tax.htm">Learn how to migrate Tax</a>
            </li>
            <li>Learn how to migrate DiscountSalesAggregatorConnector</li>
        </ul>
    </body>
</html>