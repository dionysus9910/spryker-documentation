<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="General.Demoshop,Spryker.DemoShop">
    <head>
    </head>
    <body>
        <h1>Migration Guide - Wishlist <img src="../Resources/Images/shoptype/Demoshop.png" /></h1>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot><div class="drop-anchor">Upgrading from Version 5.* to Version 6.*</div></MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>With the implementation of the quote storage strategies, the new version 5.0.0 of the Cart module has been released. The Wishlist module is dependent on it, so make sure your Cart module's version is 5.0.0 or higher.</p>
                <p><var>CartClientInterface::storeQuote</var> is deprecated, you need to use <var>QuoteClientInterface::setQuote()</var> instead.</p>
                <p><var>addItem(), addItems()</var> methods of <var>Cart</var> module saves quote after making changes.</p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot><div class="drop-anchor">Upgrading from Version 4.* to Version 5.*</div></MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>
    From version 2 have we added support for multi-currency. First of all, make sure you <a href="mg-price.htm">migrated the Price module</a>. We have changed <var>ProductStoreClient</var> to resolve product prices based on the currently selected price mode/currency.
    We have added a new depedendecy to <var>ProductStoreClient</var>: now use <var>Spryker\Client\Wishlist\Dependency\Client\WishlistToPriceProductInterface</var>. If you have extended this class, merge your changes with core accordingly.
</p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot><div class="drop-anchor">Upgrading from Version 2.* to Version 3.*
</div></MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>If you’re migrating the Wishlist module from version 2 to version 3, you need to follow the steps described below.

</p>
                <p>Version 3 of the Wishlist module introduced new schema, and old tables have to be deleted while new created.

</p>
                <p>First you need to drop old tables:
</p><pre><code class="language-PHP line-numbers">DROP TABLE spy_wishlist_item;
DROP TABLE spy_wishlist;
</code></pre>
                <p>Then you need to create new schema tables:

</p><pre><code class="language-PHP line-numbers">CREATE TABLE spy_wishlist
(
    id_wishlist INTEGER PRIMARY KEY NOT NULL,
    fk_customer INTEGER NOT NULL,
    name VARCHAR(255) NOT NULL,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    CONSTRAINT "spy_wishlist-fk_customer" FOREIGN KEY (fk_customer) REFERENCES spy_customer (id_customer)
);
CREATE UNIQUE INDEX "spy_wishlist-unique-fk_customer-name" ON spy_wishlist (fk_customer, name);


CREATE TABLE spy_wishlist_item
(
    id_wishlist_item INTEGER PRIMARY KEY NOT NULL,
    fk_product INTEGER NOT NULL,
    fk_wishlist INTEGER NOT NULL,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    CONSTRAINT "spy_wishlist_item-fk_product" FOREIGN KEY (fk_product) REFERENCES spy_product (id_product),
    CONSTRAINT "spy_wishlist_item-fk_wishlist" FOREIGN KEY (fk_wishlist) REFERENCES spy_wishlist (id_wishlist)
);
CREATE UNIQUE INDEX "spy_wishlist_item-unique-fk_wishlist-fk_product" ON spy_wishlist_item (fk_wishlist, fk_product);
</code></pre>
                <p>Schema diagram:
</p>
                <p>
                    <img src="../Resources/Images/wishlist_schema.png" title="Click Me" alt="Schema Diagram" class="Thumbnail" /><![CDATA[
]]></p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p><b>See also:</b>
        </p>
        <ul>
            <li><a href="mg-price.htm">Migrate to a newer version of Price module</a>
            </li>
            <li><a href="mg-cart.htm">Migrate to a newer version of Cart module</a>
            </li>
        </ul>
        <p>&#160;</p>
        <p><i>Last review date: Nov. 23rd, 2017 </i>
            <MadCap:conditionalText MadCap:conditions="General.Hidden Comment"><i>by Aurimas Ličkus </i>
            </MadCap:conditionalText>
        </p>
        <p><![CDATA[
]]></p>
    </body>
</html>