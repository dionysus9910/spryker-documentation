<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="General.Demoshop">
    <head>
    </head>
    <body>
        <h1>Migration Guide - ProductManagement</h1>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>
                    <div class="drop-anchor">Upgrading from Version 0.9.* to Version 0.10.*</div>
                </MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>The new version provides support to manage "abstract product-store" relations per store.</p>
                <ol>
                    <li>Update / install <var>spryker/product</var> to at least <var>6.0.0</var> version. You can find additional help for feature migration <a href="mg-product.htm">here</a>.</li>
                    <li>Update / install <var>spryker/productmanagement</var> to at least <var>0.10.0</var> version.</li>
                    <li>Run <var>vendor/bin/console transfer:generate</var> to generate the transfer object changes.
            </li>
                    <li>
                The Product Information Management (PIM) Zed Admin UI expects the "abstract product-store" relation handling partial form to be defined in the dependency provider using the <var>Spryker\Zed\Kernel\Communication\Form\FormTypeInterface</var>.
                You can use the single store and multi-store compatible default implementation <var>Spryker\Zed\Store\Communication\Form\Type\StoreRelationToggleType</var> wrapped in <var>Spryker\Zed\Store\Communication\Plugin\Form\StoreRelationToggleFormTypePlugin</var>.
                <br />                Note: <var>Spryker\Zed\Store\Communication\Plugin\Form\StoreRelationToggleFormTypePlugin</var> is introduced in <var>spryker/store</var> version <var>1.2.0</var>.
                <MadCap:dropDown><MadCap:dropDownHead><MadCap:dropDownHotspot>Example of injection</MadCap:dropDownHotspot></MadCap:dropDownHead><MadCap:dropDownBody><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\ProductManagement;

use Spryker\Zed\ProductManagement\ProductManagementDependencyProvider as SprykerProductManagementDependencyProvider;
use Spryker\Zed\Store\Communication\Plugin\Form\StoreRelationToggleFormTypePlugin;

class ProductManagementDependencyProvider extends SprykerProductManagementDependencyProvider
{
    /**
     * @return \Spryker\Zed\Kernel\Communication\Form\FormTypeInterface
     */
    protected function createStoreRelationFormTypePlugin()
    {
        return new StoreRelationToggleFormTypePlugin();
    }
}
                        </code></pre></MadCap:dropDownBody></MadCap:dropDown></li>
                </ol>
                <p>You should be able now to see the "abstract product-store" relations inside the Product Information Management (PIM) Zed Admin UI,
            however you will not able to manage / change anything yet.
            If you would like to enable the entire multi-store product behavior, please take a look here.</p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>
                    <div class="drop-anchor">Upgrading from Version 0.8.* to Version 0.9.*</div>
                </MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>With version 0.9 we have added multi-currency support. First of all make sure you <a href="mg-price.htm">migrated the Price module</a>. The way the price form is rendered has been changed: now it displays price matrix with currency, store and price type as input fields.
        Check <var>\Spryker\Zed\ProductManagement\Communication\Form\ProductFormAdd::addPriceForm</var> - it uses a new form from the Money module.
        Also check <var>\Spryker\Zed\ProductManagement\Communication\Form\ProductConcreteFormEdit::addPriceForm</var> - if you have overwritten or changed those classes, you will have to modify them accordingly.
        A new <var>ProductManagement/Presentation/_partials/product_price_collection.twig</var> form is rendered now as well.

        There is also new dependency in <var>PriceFormTypePlugin</var>. Here is snippet on how to include it:

        <pre><code class="language-PHP line-numbers">namespace Pyz\Zed\ProductManagement;

use Spryker\Zed\Money\Communication\Plugin\Form\MoneyFormTypePlugin;

class ProductManagementDependencyProvider extends SprykerProductManagementDependencyProvider
{
    /**
    * @param \Spryker\Zed\Kernel\Container $container
    *
    * @return \Spryker\Zed\Money\Communication\Plugin\Form\MoneyFormTypePlugin
    */
   protected function createMoneyFormTypePlugin(Container $container)
   {
       return new MoneyFormTypePlugin();
   }
}
        </code></pre>


        These being done, you are able to use the currency-aware form type.



    </p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>
                    <div class="drop-anchor">Upgrading from Version 0.7.* to Version 0.8.*
</div>
                </MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>If youâ€™re migrating the ProductManagement module from version 0.7.x to version 0.8.x, you need to follow the steps described below.

</p>
                <p>ProductManagement module persistence layer was moved into the new ProductAttribute module.</p>
                <h2>ORM Entities Changed</h2>
                <p>The classes under <code>Orm\Zed\ProductManagement\</code> were moved to <code>Orm\Zed\ProductAttribute\</code> namespace.</p>
                <div class="table-wrap">
                    <table>
                        <thead>
                            <tr>
                                <th>Old</th>
                                <th>New</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Spryker\Zed\ProductManagement\Persistence\Propel\AbstractSpyProductAttribute</td>
                                <td>Spryker\Zed\ProductAttribute\Persistence\Propel\AbstractSpyProductAttribute</td>
                            </tr>
                            <tr>
                                <td>Spryker\Zed\ProductManagement\Persistence\Propel\AbstractSpyProductAttributeQuery</td>
                                <td>Spryker\Zed\ProductAttribute\Persistence\Propel\AbstractSpyProductAttributeQuery</td>
                            </tr>
                            <tr>
                                <td>Spryker\Zed\ProductManagement\Persistence\Propel\AbstractSpyProductAttributeValue</td>
                                <td>Spryker\Zed\ProductAttribute\Persistence\Propel\AbstractSpyProductAttributeValue</td>
                            </tr>
                            <tr>
                                <td>Spryker\Zed\ProductManagement\Persistence\Propel\AbstractSpyProductAttributeValueQuery</td>
                                <td>Spryker\Zed\ProductAttribute\Persistence\Propel\AbstractSpyProductAttributeValueQuery</td>
                            </tr>
                            <tr>
                                <td>Spryker\Zed\ProductManagement\Persistence\Propel\AbstractSpyProductManagementAttributeValueTranslation</td>
                                <td>Spryker\Zed\ProductAttribute\Persistence\Propel\AbstractSpyProductManagementAttributeValueTranslation</td>
                            </tr>
                            <tr>
                                <td>Spryker\Zed\ProductManagement\Persistence\Propel\AbstractSpyProductManagementAttributeValueTranslationQuery</td>
                                <td>Spryker\Zed\ProductAttribute\Persistence\Propel\AbstractSpyProductManagementAttributeValueTranslationQuery</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <h2>Importer Updates</h2>
Project's importer was also updated, to take advantage of the new ProductAttribute module.
<ul><li><strong>src/Pyz/Zed/Importer/Business/Factory/AbstractFactory.php</strong><br />        Removed <code>getProductManagementFacade()</code> and replaced it with <code>getProductAttributeFacade()</code> method.
    </li><li><strong>src/Pyz/Zed/Importer/Business/Factory/ImporterFactory.php</strong><br />        Removed <code>getProductManagementFacade()</code> and replaced it with <code>getProductAttributeFacade()</code> method.
    </li><li><strong>src/Pyz/Zed/Importer/Business/Importer/ProductManagement/ProductManagementAttributeImporter.php</strong><br />        Removed <code>$productManagementFacade</code> and replaced it with <code>$productAttributeFacade</code> property.
    </li><li><strong>src/Pyz/Zed/Importer/ImporterDependencyProvider.php</strong><br />        Removed <code>FACADE_PRODUCT_MANAGEMENT</code> and replaced it with <code>FACADE_PRODUCT_ATTRIBUTE</code> constant.
        Removed <code>addProductManagementFacade()</code> and replaced it with <code>addProductAttributeFacade()</code> method.
			</li></ul><p class="note">There were no changes to the database schema.</p><p>&#160;</p><p><i>Last review date: Jan. 23, 2017 </i><MadCap:conditionalText MadCap:conditions="General.Hidden Comment"><i>by Karoly Gerner</i></MadCap:conditionalText></p> </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p>&#160;</p>
        <p><b>See also:</b>
        </p>
        <ul>
            <li><a href="mg-price.htm">Learn how to migrate Price</a>
            </li>
            <li><a href="mg-product.htm">Learn how to migrate Product</a>
            </li>
            <li>Learn more about Products in multi-store environment</li>
        </ul>
        <p>&#160;</p>
        <p><i>Last review date: Jan. 23rd, 2018 </i>
            <MadCap:conditionalText MadCap:conditions="General.Hidden Comment"><i>by Karoy Gerner </i>
            </MadCap:conditionalText>
        </p>
    </body>
</html>