<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="">
    <head>
    </head>
    <body>
        <h1>HowTo - Setup database connections</h1>
        <p>
			Spryker provides flexible database connection configuration.
		</p>
        <h3>Single connection</h3>
        <p>Most probable use case and the Zed DB connection is a good example here.</p>
        <p>
			For this you need to open environment config file (eg. <code>APP_DIR/config/Shared/config_default-development_DE.php</code>)
			and add the following parameters:
		</p><pre><code class="language-PHP line-numbers">
			$config[PropelConstants::ZED_DB_USERNAME] = 'username';
			$config[PropelConstants::ZED_DB_PASSWORD] = 'password';
			$config[PropelConstants::ZED_DB_DATABASE] = 'database';
			$config[PropelConstants::ZED_DB_HOST] = '127.0.0.1';
			$config[PropelConstants::ZED_DB_PORT] = 3306;
			$config[PropelConstants::ZED_DB_ENGINE] = $config[PropelConstants::ZED_DB_ENGINE_MYSQL];
		</code></pre>
        <p>
			By default Spryker provides configuration for a single connection (two <code>zed</code> and <code>default</code>, but with the same configuration).
			The configuration you could find in <code>APP_DIR/config/Shared/config_propel.php</code> and it will look similar to the following:
		</p><pre><code class="language-PHP line-numbers">
			$engine = $config[PropelConstants::ZED_DB_ENGINE];
			$config[PropelConstants::PROPEL]['database']['connections']['default'] = $connections[$engine];
			$config[PropelConstants::PROPEL]['database']['connections']['zed'] = $connections[$engine];
		</code></pre>
        <h3>Multi connections</h3>
        <p>
			Custom case, which allows to a project to have more than one connections to different DBs.
		</p>
        <p>
			To define a new connection find a Propel configuration <code>APP_DIR/config/Shared/config_propel.php</code>
			and add the following (example for Postgres):
		</p><pre><code class="language-PHP line-numbers">
			$config[PropelConstants::PROPEL]['database']['connections']['additional_db_connection'] = [
			'adapter' =&gt; PropelConfig::DB_ENGINE_PGSQL,
			'dsn' =&gt; 'pgsql:host=127.0.0.1;port=5432;dbname=additional_db',
			'user' =&gt; 'username',
			'password' =&gt; 'password',
			'settings' =&gt; [],
			]
		</code></pre>
        <p>
			When a new connection is available you could use it in your schema file.
		</p><code class=""><database xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="additional_db_connection" xsi:noNamespaceSchemaLocation="http://static.spryker.com/schema-01.xsd" namespace="SomeNameSpace" package="src.Orm.Zed.CustomerCare.Persistence"></database></code>
    </body>
</html>