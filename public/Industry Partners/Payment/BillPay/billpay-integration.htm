<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="Spryker.DemoShop,Spryker.B2B,Spryker.B2C">
    <head>
        <link href="../../../Resources/TableStyles/PatternedRows2.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>Billpay - Integration</title>
    </head>
    <body>
        <h1>Billpay - Integration <img src="../../../Resources/Images/shoptype/B2B_Shop.png" /> <img src="../../../Resources/Images/shoptype/B2C_Shop.png" /> <img src="../../../Resources/Images/shoptype/Demoshop.png" /></h1>
        <p>Billpay offers multiple payment methods (Invoice, Direct Debit, PayLater, Instalment). Availability of payment methods differs from country to country. Please contact Billpay directly or visit the <a href="https://www.billpay.de/en/business-clients/merchant-request">Billpay websit</a>e  for details.</p>
        <p>The Billpay module provides integration with the <a href="billpay_payment_methods.htm">Invoice with prescoring</a> payment method.</p>
        <h2>Configuration</h2>
        <p>Billpay comes with a <code> config.dist.php</code> file that you can use as a sample configuration for your project by copying its content to your project configuration file. You can find all of your project configuration files in the <code>config </code>folder. </p>
        <p>See <a href="http://documentation.spryker.com/resources_and_developer_tools/configuration-management.htm">Configuration Management</a> for more on configuration.</p>
        <h3>Configuration Options:</h3>
        <table class="TableStyle-PatternedRows2" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/TableStyles/PatternedRows2.css');" cellspacing="0">
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <thead>
                <tr class="TableStyle-PatternedRows2-Head-Header1">
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Name	</th>
                    <th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>GATEWAY_URL</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>	url to Billpay API</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p>BILLPAY_MERCHANT_ID</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p>	Merchant ID that Billpay will provide to you</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>BILLPAY_PORTAL_ID</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>Portal ID that Billpay will provide to you</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p>BILLPAY_SECURITY_KEY	</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p>MD5 hash of the security key generated for this portal. (generated and delivered by BillPay)</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>BILLPAY_PUBLIC_API_KEY</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>	Public API Key; generated and delivered by BillPay for your portal.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p>BILLPAY_MAX_DELAY_IN_DAYS	</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p>Amount of days that will be added to the payment due date (e.g. in case of delayed shipping)</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>USE_MD5_HASH</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>	If your security key is not md5 hash encrypted, you can do that by setting this config to 1</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">
                        <p>USE_PRESCORE</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows">
                        <p>	In if it is necessary to show all Billpay payment methods despite of Billpay prescore response, you can set this option to 0. It should be set to 1 by default.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>When you add options above to your project configuration, it should look somewhat like this:</p><pre><code class="language-php line-numbers">&lt;?php
$config[BillpayConstants::GATEWAY_URL] = 'https://test-api.billpay.de/xml/offline';
$config[BillpayConstants::BILLPAY_MERCHANT_ID] = '6063';
$config[BillpayConstants::BILLPAY_PORTAL_ID] = '8635';
$config[BillpayConstants::BILLPAY_SECURITY_KEY] = 'IzjZ8hUwPQt6';
$config[BillpayConstants::BILLPAY_PUBLIC_API_KEY] = 'a39eb681636dec360000008635';
$config[BillpayConstants::BILLPAY_MAX_DELAY_IN_DAYS] = 20;
$config[BillpayConstants::USE_MD5_HASH] = 1;
$config[BillpayConstants::USE_PRESCORE] = 1;</code></pre>
        <h2>Additional Configuration Options</h2>
        <p>Payone module provides dependency injectors to extend checkout and order processing. Please add or extend with the corresponding keys:</p><pre><code class="language-php line-numbers">&lt;?php
$config[KernelConstants::DEPENDENCY_INJECTOR_YVES] = [
    'Checkout' =&gt; [
        'Billpay',
    ],
];

$config[KernelConstants::DEPENDENCY_INJECTOR_ZED] = [
    'Payment' =&gt; [
        'Billpay',
    ],
    'Oms' =&gt; [
        'Billpay',
    ],
];</code></pre>
        <p>In order to use the Billpay module state machines,  add the location path to configuration:</p><pre><code class="language-php line-numbers">&lt;?php
$config[OmsConstants::PROCESS_LOCATION] = [
    OmsConfig::DEFAULT_PROCESS_LOCATION,
    $config[KernelConstants::SPRYKER_ROOT] . '/Billpay/config/Zed/Oms',
];

$config[OmsConstants::ACTIVE_PROCESSES] = [
    'BillpayInvoice01',
];</code></pre>
        <p>We link the OMS state machine with payment method as shown bellow:</p><pre><code class="language-php line-numbers">&lt;?php
$config[SalesConstants::PAYMENT_METHOD_STATEMACHINE_MAPPING] = [
    BillpayConstants::PAYMENT_METHOD_INVOICE =&gt; 'BillpayInvoice01',
];</code></pre>
        <p>&#160;</p>
        <p><![CDATA[
		
		]]><b>See also:</b></p>
        <ul>
            <li><![CDATA[
                ]]><a href="#">Integrate Billpay Payment</a><![CDATA[
            ]]></li>
            <li><![CDATA[
                ]]><a href="billpay_payment_methods.htm">Billpay Invoice Payment in Preauthorize Mode</a></li>
        </ul>
        <p>&#160;</p>
        <p><i>Last
review date:  Dec. 21st, 2017</i>
            <MadCap:conditionalText MadCap:conditions="General.Hidden Comment"><i> by Mykyta Borysevych</i>
            </MadCap:conditionalText>
        </p>
    </body>
</html>