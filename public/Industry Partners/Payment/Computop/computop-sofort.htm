<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="Spryker.DemoShop,Spryker.B2C">
    <head>
    </head>
    <body>
        <h1>Computop - Sofort <img src="../../../Resources/Images/shoptype/B2C_Shop.png" /> <img src="../../../Resources/Images/shoptype/Demoshop.png" /></h1>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Example State Machine:</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <div>
                    <img class="o-cover__logo" src="../../../Resources/Images/Computop/computop-sofort-flow-example.png" />
                </div>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <h2>Front-End Integration</h2>
        <p>
    To adjust the frontend appearance, provide the following templates in your theme directory:
</p>
        <p class="bullet_list"><var>src/&lt;project_name&gt;/Yves/Computop/Theme/&lt;custom_theme_name&gt;/sofort.twig</var>
        </p>
        <h2>State Machine Integration</h2>
        <p>The Computop provides a demo state machine for Sofort payment method which implements Capture flow.</p>
        <p>To enable the demo state machine, extend the configuration with the following values:</p><pre><code class="language-php line-numbers">
    &lt;?php
$config[SalesConstants::PAYMENT_METHOD_STATEMACHINE_MAPPING] = [
    ...
    ComputopConfig::PAYMENT_METHOD_SOFORT =&gt; 'ComputopSofort',
];

$config[OmsConstants::ACTIVE_PROCESSES] = [
    ...
    'ComputopSofort',
];</code></pre>
        <h2>Sofort Payment Flow:</h2>
        <ol>
            <li>
				There is a radio button on "Payment" step.
				After submitting the order the customer will be redirected to the Computop (Paygate form implementation).
				The GET consists of 3 parameters:
				<ul><li>data (encrypted parameters, e.g. currency, amount, description);</li><li>length (length of 'data' parameter);</li><li>merchant id (assigned by Computop);</li></ul>
        Customer sets up all data just after the redirect to Computop.
        Init action: "Capture". There are no Order and Authorization calls provided for this payment method.
    </li>
            <li>
				By default, on success the customer  will be redirected to "Success" step. The response contains <var>payId</var>
				On error, the customer  will be redirected to "Payment" step with the error message by default.
				Response data is stored in the DB.
    </li>
            <li>
				Capture/Refund and Cancel actions are implemented in the admin panel (on manage order).
				On requests, Spryker will use <var>payId</var> parameter stored in the DB to identify a payment.
    </li>
        </ol>
        <h2>Set Up Details:</h2>
        <p>Important for a live MID is:</p>
        <ol>
            <li>Merchant must have a bank account at the Sofort Bank.</li>
            <li>The contract with Sofort must be extended specifically for credits.</li>
            <li>The credit function must be configured in the Sofort project, as well as in the Computop (on the MID).</li>
        </ol>
        <p>&#160;</p>
        <p style="font-weight: bold;">See also:</p>
        <ul>
            <li><a href="computop.htm">Get a general idea about Computop</a><![CDATA[
            ]]></li>
            <li><a href="computop-api-details.htm">Learn about Computop API</a><![CDATA[
            ]]></li>
            <li><a href="computop-oms-details.htm">Get acquainted with Computop OMS functioning
            
</a>
            </li>
            <li><a href="computop-credit-card.htm">Configure Credit Card payment method for Computop</a><![CDATA[
            ]]></li>
            <li><a href="computop-direct-debit.htm">Configure Direct Debit payment method for Computop</a><![CDATA[
            ]]></li>
            <li><a href="computop-easy-credit.htm">Configure Easy Credit payment method for Computop</a><![CDATA[
            ]]></li>
            <li><a href="computop-ideal.htm">Configure iDeal payment method for Computop</a><![CDATA[
            ]]></li>
            <li><a href="computop-paydirekt.htm">Configure Paydirekt payment method for Computop</a><![CDATA[
            ]]></li>
            <li><a href="computop-paynow.htm">Configure PayNow payment method for Computop</a><![CDATA[
            ]]></li>
            <li><a href="computop-paypal.htm">Configure PayPal payment method for Computop
            
</a>
            </li>
            <li><a href="computop-crif.htm">Computop CRIF</a><![CDATA[           
			]]></li>
        </ul>
        <p>&#160;</p>
        <p><i>Last review date: Feb. 20th, 2018</i>
            <MadCap:conditionalText MadCap:conditions="General.Hidden Comment">by Aleksey Kotsuba</MadCap:conditionalText>
        </p>
    </body>
</html>