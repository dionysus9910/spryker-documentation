<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="Spryker.DemoShop,Spryker.B2C">
    <head><title>Braintree — Performing Requests for the Legacy Demoshop | Spryker</title>
        <link href="../../../../Resources/TableStyles/PatternedRows2.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="To perform the Braintree requests in the Legacy Demoshop, it is necessary to use the implemented state machine commands and conditions." />
    </head>
    <body>
        <h1>Braintree - Performing Requests for the Legacy Demoshop<img src="../../../../Resources/Images/shoptype/B2C_Shop.png" /> <img src="../../../../Resources/Images/shoptype/Demoshop.png" /></h1>
        <p>In order to perform the needed requests, you can easily use the implemented state machine commands and conditions. The next section gives a summary of them. You can also use the facade methods directly which, however, are invoked by the state machine.</p>
        <h2>Braintree State Machine Commands and Conditions</h2>
        <h3>Commands</h3>
        <p><b>Authorize</b>
        </p>
        <ul>
            <li class="bullet_list">Authorize the payment by validating the given payment data</li>
            <li class="bullet_list">Response:
        <ul><li class="bullet_list">Success: Payment Details accepted</li><li class="bullet_list">Declined: Request format error, payment details not accepted</li></ul></li>
            <li class="bullet_list">Plugin: <var>AuthorizePlugin</var></li>
        </ul>
        <p><b>Revert</b>
        </p>
        <ul>
            <li class="bullet_list">Revert a previous pre-authorization call</li>
            <li class="bullet_list">Always reverts the complete pre-check or authorization</li>
            <li class="bullet_list">Plugin: <var>RevertPlugin</var></li>
        </ul>
        <p><b>Capture</b>
        </p>
        <ul>
            <li class="bullet_list">Capture of previous (p)re-authorization call Response:
        <ul><li class="bullet_list">Success: Previous (p)re-authorization still valid and accepted</li><li class="bullet_list">Declined: Previous (p)re- authorization expired, request format error, or internal error</li></ul></li>
            <li class="bullet_list">Plugin: <var>CapturePlugin</var></li>
        </ul>
        <p><b>Refund</b>
        </p>
        <ul>
            <li class="bullet_list">Refund previous captured amount</li>
            <li class="bullet_list">Full and partial refunds possible</li>
            <li class="bullet_list">Response:
        <ul><li class="bullet_list">Success: Refund possible and accepted</li><li class="bullet_list">Declined: Previous capture to far in the past, request format error, or internal</li></ul></li>
            <li class="bullet_list">Plugin: <var>RefundPlugin</var></li>
        </ul>
        <h3>Conditions</h3>
        <table class="TableStyle-PatternedRows2" style="mc-table-style: url('../../../../Resources/TableStyles/PatternedRows2.css');" cellspacing="0">
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <thead>
                <tr class="TableStyle-PatternedRows2-Head-Header1">
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Name</th>
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Description</th>
                    <th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Plugin</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>IsAuthorizationApproved</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>Checks transaction status log for successful authorization response	</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p><var>IsAuthorizationApprovedPlugin</var>
                        </p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>IsReversalApproved</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p>Checks transaction status log for successful reversal response</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p><var>IsReversalApprovedPlugin</var>
                        </p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>IsCaptureApproved</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>Checks transaction status log for successful capture response</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p><var>IsCaptureApprovedPlungin</var>
                        </p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">
                        <p><var>IsRefundApproved</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">
                        <p>Checks transaction status log for successful refund response</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows">
                        <p><var>IsRefundApprovedPlugin</var>
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Braintree Facade</h2>
        <table style="mc-table-style: url('../../../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0">
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <thead>
                <tr class="TableStyle-PatternedRows2-Head-Header1">
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Facade Method</th>
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Param</th>
                    <th class="TableStyle-PatternedRows2-HeadE-Regular-Header1">Return</th>
                    <th class="TableStyle-PatternedRows2-HeadD-Regular-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>saveOrderPayment</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>QuoteTransfer</var>
                        </p>
                        <p><var>CheckoutResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>void</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>Saves order payment method data according to quote and checkout response transfer data.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>preCheckPayment</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>QuoteTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>BraintreeTransactionResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p>Sends pre-authorize payment request to Braintree gateway to retrieve transaction data.</p>
                        <p>Checks that form data matches transaction response data.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>authorizePayment</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>TransactionMetaTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>BraintreeTransactionResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>Processes payment confirmation request to Braintree gateway.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>capturePayment</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>TransactionMetaTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>BraintreeTransactionResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p>Processes capture payment request to Braintree gateway.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>revertPayment</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>TransactionMetaTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>BraintreeTransactionResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>Processes cancel payment request to Braintree gateway.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>refundPayment</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>SpySalesOrderItem[]</var>
                        </p>
                        <p><var>SpySalesOrder</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>BraintreeTransactionResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p>Calculate <var>RefundTransfer</var> for given <var>$salesOrderItems</var> and <var>$salesOrderEntity</var>.</p>
                        <p>Processes refund request to Braintree gateway by calculated <var>RefundTransfer</var>.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>isAuthorizationApproved</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>OrderTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>bool</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>Checks if pre-authorization API request got success response from Braintree gateway.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>isReversalApproved</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>OrderTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p>bool</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p>Checks if cancel API request got success response from Braintree gateway.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>isCaptureApproved</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>OrderTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p>bool</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>Checks if capture API request got success response from Braintree gateway.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>isRefundApproved</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>OrderTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p>bool</p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">
                        <p>Checks if refund API request got success response from Braintree gateway.</p>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows">
                        <p><var>postSaveHook</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows">
                        <p><var>OrderTransfer</var>
                        </p>
                        <p><var>CheckoutResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows">
                        <p><var>CheckoutResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyA-Regular-LightRows">
                        <p>Execute post-save hook.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>&#160;</p>
        <p><strong>See also:</strong>
        </p>
        <ul>
            <li><a href="../braintree.htm">Get a general idea about Braintree</a>
            </li>
            <li><a href="braintree-configuration-legacy-demoshop.htm">Configure Braintree
                  
</a>
            </li>
            <li><a href="braintree-workflow-legacy-demoshop.htm">Familiarize yourself with the Braintree workflow
            
</a>
            </li>
        </ul>
        <p>&#160;</p>
        <p><i>Last review date: Dec. 22nd, 2017 </i>
            <MadCap:conditionalText MadCap:conditions="General.Hidden Comment"><i>by Darius Telyčėnas</i>
            </MadCap:conditionalText>
        </p>
    </body>
</html>