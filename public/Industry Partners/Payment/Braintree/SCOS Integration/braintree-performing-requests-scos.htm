<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Spryker.ShopSuite">
    <head>
        <link href="../../../../Resources/TableStyles/PatternedRows2.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>Braintree - Performing Requests for SCOS | Spryker</title>
        <meta name="description" content="To perform the Braintree requests in the SCOS, it is necessary to use the implemented state machine commands and conditions." />
    </head>
    <body>
        <h1>Braintree - Performing Requests for SCOS <img src="../../../../Resources/Images/shoptype/MasterSuite.png" /></h1>
        <p>In order to perform the necessary requestsin the project based on <MadCap:variable name="General.ProductName" /> or SCOS,  you can easily use the implemented state machine commands and conditions. The next section gives a summary of them. You can also use the facade methods directly which, however, are invoked by the state machine.</p>
        <h2>Braintree State Machine Commands and Conditions</h2>
        <h3>Commands</h3>
        <p><b>Authorize</b>
        </p>
        <ul>
            <li class="bullet_list">Authorize the payment by validating the given payment data</li>
            <li class="bullet_list">Response:
        <ul><li class="bullet_list">Success: Payment Details accepted</li><li class="bullet_list">Declined: Request format error, payment details not accepted</li></ul></li>
            <li class="bullet_list">Plugin: <var>AuthorizePlugin</var></li>
        </ul>
        <p><b>Revert</b>
        </p>
        <ul>
            <li class="bullet_list">Revert a previous pre-authorization call</li>
            <li class="bullet_list">Always reverts the complete pre-check or authorization</li>
            <li class="bullet_list">Plugin: <var>RevertPlugin</var></li>
        </ul>
        <p><b>Capture</b>
        </p>
        <ul>
            <li class="bullet_list">Capture of previous (p)re-authorization call Response:
        <ul><li class="bullet_list">Success: Previous (p)re-authorization still valid and accepted</li><li class="bullet_list">Declined: Previous (p)re- authorization expired, request format error, or internal error</li></ul></li>
            <li class="bullet_list">Plugin: <var>CapturePlugin</var></li>
        </ul>
        <p><b>Refund</b>
        </p>
        <ul>
            <li class="bullet_list">Refund previous captured amount</li>
            <li class="bullet_list">Full and partial refunds possible</li>
            <li class="bullet_list">Response:
        <ul><li class="bullet_list">Success: Refund possible and accepted</li><li class="bullet_list">Declined: Previous capture to far in the past, request format error, or internal</li></ul></li>
            <li class="bullet_list">Plugin: <var>RefundPlugin</var></li>
        </ul>
        <h3>Conditions</h3>
        <table style="width: 100%;mc-table-style: url('../../../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0">
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <tbody>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Name</td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Description</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">Plugin</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>IsAuthorizationApproved</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">Checks transaction status log for successful authorization response</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>IsAuthorizationApprovedPlugin</var>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>IsReversalApproved</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Checks transaction status log for successful reversal response</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows"><var>IsReversalApprovedPlugin</var>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>IsCaptureApproved</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">Checks transaction status log for successful capture response</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows"><var>IsCaptureApprovedPlungin</var>
                    </td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows"><var>IsRefundApproved</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-LightRows">Checks transaction status log for successful refund response</td>
                    <td class="TableStyle-PatternedRows2-BodyA-Regular-LightRows"><var>IsRefundApprovedPlugin</var>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Braintree Facade</h2>
        <table style="width: 100%;mc-table-style: url('../../../../Resources/TableStyles/PatternedRows2.css');" class="TableStyle-PatternedRows2" cellspacing="0">
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <col class="TableStyle-PatternedRows2-Column-Regular" />
            <tbody>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Facade Method</td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Parameter</td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">Return</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">Description</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>saveOrderPayment</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">
                        <p><var>QuoteTransfer</var>
                        </p>
                        <p><var>CheckoutResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">void</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">Saves order payment method data according to quote and checkout response transfer data.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>preCheckPayment</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>QuoteTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>BraintreeTransactionResponseTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">Sends pre-authorize payment request to Braintree gateway to retrieve transaction data.

<br />Checks that form data matches transaction response data.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>authorizePayment</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>TransactionMetaTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>BraintreeTransactionResponseTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">Processes payment confirmation request to Braintree gateway.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>capturePayment</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>TransactionMetaTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>BraintreeTransactionResponseTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">Processes capture payment request to Braintree gateway.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>revertPayment</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>TransactionMetaTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>BraintreeTransactionResponseTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">Processes cancel payment request to Braintree gateway.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>refundPayment</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">
                        <p><var>SpySalesOrderItem[]</var>
                        </p>
                        <p><var>SpySalesOrder</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>BraintreeTransactionResponseTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">
                        <p>Calculate <var>RefundTransfer</var> for given <var>$salesOrderItems</var> and <var>$salesOrderEntity</var></p>.<p>Processes refund request to Braintree gateway by calculated <var>RefundTransfer</var>.</p></td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>isAuthorizationApproved</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>OrderTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">bool</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">Checks if pre-authorization API request got success response from Braintree gateway.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>isReversalApproved</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>OrderTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">bool</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">Checks if cancel API request got success response from Braintree gateway.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>isCaptureApproved</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows"><var>OrderTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-DarkerRows">bool</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-DarkerRows">Checks if capture API request got success response from Braintree gateway.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-LightRows">
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>isRefundApproved</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows"><var>OrderTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyE-Regular-LightRows">bool</td>
                    <td class="TableStyle-PatternedRows2-BodyD-Regular-LightRows">Checks if refund API request got success response from Braintree gateway.</td>
                </tr>
                <tr class="TableStyle-PatternedRows2-Body-DarkerRows">
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows"><var>postSaveHook</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows">
                        <p><var>OrderTransfer</var>
                        </p>
                        <p><var>CheckoutResponseTransfer</var>
                        </p>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyB-Regular-DarkerRows"><var>CheckoutResponseTransfer</var>
                    </td>
                    <td class="TableStyle-PatternedRows2-BodyA-Regular-DarkerRows">Execute post-save hook.</td>
                </tr>
            </tbody>
        </table>
    </body>
</html>