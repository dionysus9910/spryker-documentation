<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="General.Draft,Spryker.B2C,Spryker.DemoShop">
    <head><title>Klarna - Payment Workflow</title>
    </head>
    <body>
        <h1>Klarna
- Payment Workflow <img src="../../../Resources/Images/shoptype/B2C_Shop.png" /> <img src="../../../Resources/Images/shoptype/Demoshop.png" /></h1>
        <p>Both <var>Part Payment</var> and <var>Invoice</var> payment methods have the same request flow. It basically consists of the following steps:

</p>
        <ul>
            <li class="bullet_list">Pre-check: reserves the amount of the purchase
</li>
            <li class="bullet_list">Check order status: checks if the order status is <var>pending accepted</var>. If it’s not, OMS waits for 2 hours and then calls again <var>KlarnaApi</var> to retrieve the status of the order. In case the status is <var>denied</var> the order is canceled.
</li>
            <li class="bullet_list">Capture payment: activates the reservation that corresponds to the given reference number
</li>
            <li class="bullet_list">Update payment: if activation fails, we need to update the reservation that corresponds to the given reference number
</li>
            <li class="bullet_list">Refund: performs a partial refund.
</li>
            <li class="bullet_list">Cancel: cancels a reservation.
</li>
        </ul>
        <p>&#160;</p>
        <p><b>See also:
			</b>
        </p>
        <ul>
            <li><a href="klarna.htm">Learn about Klarna payment system</a>
            </li>
            <li><a href="klarna-state-machine.htm">Get acquainted with Klarna State Machine Commands and Conditions</a>
            </li>
            <li><a href="klarna-part-payment-flexible.htm">Implement partial payments with Klarna</a>
            </li>
            <li><a href="klarna-invoice-pay-in-14-days.htm">Configure invoice 14-day payment with Klarna</a>
            </li>
        </ul>
    </body>
</html>