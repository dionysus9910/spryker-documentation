<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Top_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-has-content-body="True" data-mc-conditions="Spryker.B2C,Spryker.B2B,Spryker.DemoShop,ReleaseVersions.2019-03" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Features|Checkout|Multi-Step Checkout">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../Skins/Favicons/browserconfig.xml" />
        <meta name="description" content="In order to use checkout in Yves it should be correctly configured and dependencies should be provided." />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../Skins/Favicons/favicon-16x16.png" />
        <meta charset="utf-8" />
        <meta name="description" content="" />
        <meta name="author" content="" /><title>Checkout Process | Spryker</title>
        <!-- Google Tag Manager -->
        <script>/* <![CDATA[ */(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-NP24S2');/* ]]> */</script>
        <!-- End Google Tag Manager -->
        <script>/* <![CDATA[ */
			var s = document.createElement("script");
			s.type = "text/javascript";
			s.src = "https://www.googletagmanager.com/gtag/js?id==UA-56589105-4";
			document.getElementsByTagName('head').item(0).appendChild(s);
		/* ]]> */</script>
        <script>/* <![CDATA[ */
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'UA-56589105-4');
		/* ]]> */</script>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" />
        <link href="../../../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" />
        <link href="../../../resources/stylesheets/perfect-scrollbar.css" rel="stylesheet" />
        <link href="../../../resources/stylesheets/prism.css" rel="stylesheet" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-previous.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/navigate-next.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/printer.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../../../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../../resources/scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../resources/stylesheets/mainstyles.css" rel="stylesheet" />
        <script src="../../../resources/scripts/custom.modernizr.js">
        </script>
        <script src="../../../resources/scripts/jquery.min.js">
        </script>
        <script src="../../../resources/scripts/require.min.js">
        </script>
        <script src="../../../resources/scripts/require.config.js">
        </script>
        <script src="../../../resources/scripts/foundation.6.2.3_custom.js">
        </script>
        <script src="../../../resources/scripts/plugins.min.js">
        </script>
        <script src="../../../resources/scripts/MadCapAll.js">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="small" data-mc-ignore="true">
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <button class="menu-icon" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../../home.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" placeholder="Search the Academy" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <section class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <div class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </div>
                            <div class="body-container" data-mc-content-body="True">
                                <!-- Google Tag Manager (noscript) -->
                                <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NP24S2" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                </noscript>
                                <!-- End Google Tag Manager (noscript) -->
                                <div class="search-container">
                                    <form class="search" action="#">
                                        <div class="search-bar search-bar-container needs-pie _Skins_SearchTopics mc-component">
                                            <input class="search-field needs-pie" type="search" placeholder="Search" />
                                            <div class="search-filter-wrapper">
                                                <div class="search-filter">
                                                    <div class="search-filter-content">
                                                        <ul>
                                                            <li>All Files</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="search-submit-wrapper" dir="ltr">
                                                <div class="search-submit" title="Search">
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="row collapse">
                                    <div class="top-bar">
                                        <div class="breadcrumbs-block">
                                            <div class="nocontent">
                                                <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                        </div>
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie _Skins_SearchHome mc-component">
                                                <input class="search-field needs-pie" type="search" placeholder="Search" />
                                                <div class="search-filter-wrapper">
                                                    <div class="search-filter">
                                                        <div class="search-filter-content">
                                                            <ul>
                                                                <li>All Files</li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search">
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="topic-layout">
                                        <div>
                                            <div class="side-menu">
                                                <div data-sticky-container="" id="vGuHNlDz9kWDFkaD2M4oZw">
                                                    <div class="sticky sticky-menu" style="width:100%" data-sticky="" data-top-anchor="vGuHNlDz9kWDFkaD2M4oZw:top" data-bottom-anchor="contentBody:bottom" data-sticky-on="small" data-scroll-container-on="small">
                                                        <ul class="nocontent menu _Skins_SideMenu mc-component" data-mc-is-context-sensitive="True" data-mc-linked-toc="Data/Tocs/master.js" data-mc-side-menu="True" data-mc-max-depth="1" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="side-menu">
                                                <div class="toolbar-wrapper">
                                                    <div class="widget-github js-widget-github"><a class="widget-github-link js-widget-github-link" href="https://github.com/spryker/spryker-documentation" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 26 26"><path d="M13.5 0C6.057 0 0 6.057 0 13.5c0 5.888 3.791 10.905 9.058 12.745a.463.463 0 0 0 .258.088c1.316.43 2.724.667 4.184.667C20.943 27 27 20.943 27 13.5S20.943 0 13.5 0zm0 .931c6.93 0 12.569 5.639 12.569 12.569 0 5.428-3.459 10.061-8.287 11.818a1.903 1.903 0 0 1-.092-.527v-2.446c0-.975-.477-2.037-.946-2.75 2.584-.436 5.537-1.776 5.537-6.779 0-1.37-.429-2.58-1.275-3.598.186-.611.415-1.9-.225-3.52a.47.47 0 0 0-.291-.272c-.13-.04-1.326-.35-3.806 1.277a12.921 12.921 0 0 0-6.36 0c-2.481-1.63-3.68-1.319-3.809-1.277a.47.47 0 0 0-.29.273C5.582 7.319 5.811 8.607 6 9.218c-.85 1.018-1.279 2.227-1.279 3.598 0 4.957 2.9 6.323 5.463 6.778-.322.407-.66.934-.81 1.47-.661.184-2.018.19-2.929-1.37-.032-.06-.829-1.475-2.4-1.584-.25.002-.882.042-1.035.525-.169.537.424.944.679 1.117l.058.034c.029.015.707.371 1.213 1.644.105.333 1.03 2.84 4.353 2.399.002.367 0 .552-.004.7v.26c0 .15-.045.378-.096.525C4.386 23.558.931 18.924.931 13.5.931 6.57 6.57.931 13.5.931zm6.51 5.375c.5 1.471.158 2.537.035 2.839a.468.468 0 0 0 .089.49c.805.883 1.214 1.952 1.214 3.181 0 4.72-2.796 5.666-5.535 5.97a.464.464 0 0 0-.253.815c.368.314 1.199 1.68 1.199 2.744v2.446c0 .009.001.414.134.809a12.513 12.513 0 0 1-6.792-.002c.135-.396.139-.802.139-.81l.001-.248c.002-.211.006-.497 0-1.266a.473.473 0 0 0-.174-.362.47.47 0 0 0-.391-.09c-3.126.681-3.802-1.576-3.828-1.67l-.016-.047c-.448-1.135-1.037-1.713-1.388-1.975.759.267 1.182 1.007 1.193 1.024 1.231 2.107 3.264 2.162 4.328 1.685a.463.463 0 0 0 .27-.36c.095-.665.826-1.545 1.196-1.87a.464.464 0 0 0 .136-.488.461.461 0 0 0-.39-.324c-2.73-.31-5.524-1.266-5.524-5.98 0-1.228.41-2.3 1.219-3.181a.464.464 0 0 0 .087-.491c-.124-.302-.467-1.364.031-2.837.396.013 1.362.182 2.988 1.286.112.076.256.1.387.063.973-.27 2.058-.416 3.135-.421 1.08.005 2.166.15 3.14.421.131.037.273.013.386-.063 1.635-1.11 2.6-1.275 2.984-1.288z" /></svg></a>
                                                    </div>
                                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolbar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic NextTopic Print ExpandAll CollapseAll;">
                                                        <div class="button-group-container-left">
                                                            <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="previous topic" />
                                                            </button>
                                                            <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="next topic" />
                                                            </button>
                                                            <button class="button needs-pie print-button" title="Print">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="print" />
                                                            </button>
                                                            <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                                <img src="../../../Skins/Default/Stylesheets/Images/transparent.gif" alt="expand all" />
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="js-anchorer main-content">
                                                    <h1>Checkout Process <img src="../../../resources/images/shoptype/b2b_shop.png" /> <img src="../../../resources/images/shoptype/b2c_shop.png" /> <img src="../../../resources/images/shoptype/demoshop.png" /></h1>
                                                    <div class="MCHelpControl MCHelpControl-Related relatedTopics relatedTopicssideContent" style="mc-label: 'Versions';mc-help-control-display: list;"><span class="MCHelpControl-RelatedHotSpot_ MCHelpControl-RelatedHotSpot_sideContent"><img class="MCHelpControl_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="16" width="16" alt="Related Topics Link Icon" />Versions</span>
                                                        <ul class="MCHelpControlList MCRelatedTopicsControlList">
                                                            <li class="MCHelpControlListItem MCRelatedTopicsControlListItem"><a class="MCHelpControlListItemLink MCRelatedTopicsControlListItemLink" href="checkout-process.htm#2018-10" target="_self">Checkout Process  </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Checkout Process</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>To use checkout in Yves, first, you need to configure it correctly and provide dependencies. Each step can have a form, a controller action, the implementation of the step logic and Twig template to render the HTML.</p>
                                                            <ul>
                                                                <li class="bullet_list" value="1">Forms - current step form collection.</li>
                                                                <li class="bullet_list" value="2">Controller action - the action that is called when the step is being triggered</li>
                                                                <li class="bullet_list" value="3">Step - a class that implements the <var>StepInterface</var> and handles the data passed through the form.</li>
                                                                <li class="bullet_list" value="4">Twig template - template where the form is rendered.</li>
                                                            </ul>
                                                            <p>Each form in the Checkout uses <var>QuoteTransfer</var> for data storage. When the data is being submitted, it’s automatically mapped by the Symfony form component to <var>QuoteTransfer</var>. If the form is valid, the updated <var>QuoteTransfer</var> is passed to <var>Step::execute()</var> method where you can modify it further or apply custom logic. Also, there is Symfony <var>Request</var> object passed if additional/manual data mapping is required.</p>
                                                            <p>There are a few factories provided for checkout dependency wiring:</p>
                                                            <ul>
                                                                <li class="bullet_list" value="1"><var>FormFactory</var> - creates form collections for each step.</li>
                                                                <li class="bullet_list" value="2"><var>StepFactory</var> - creates the steps together with their dependencies and plugins.</li>
                                                                <li class="bullet_list" value="3"><var>CheckoutFactory</var> - where the <var>StepProcess</var> is created for all steps.</li>
                                                            </ul>
                                                            <p>We have a step process which contains the list of the steps created. The <var>CheckoutProcess::process(Request, FormCollectionHandlerInterface)</var> process method accepts a Request which is currently submitted and a <var>FormCollectionHandlerInterface</var> implementation that contains the list of forms that are used in the current step. If there are multiple forms that are used, <var>FormCollectionHandler</var> selects the right one when the request is being performed.</p>
                                                            <p>In most cases, forms need external data to work with. For example, Checkout Address step uses data provider to retrieve all stored customer addresses and company business unit addresses, if the customer is a company user.</p>
                                                            <p>Another example - Checkout Payment step. It uses data provider to retrieve all available payment providers, that are being rendered on the page.</p>
                                                            <p>Using a data provider is the only way to pass any external data to the form and step page, that can be accessed, processed and later saved into the <var>QuoteTransfer</var>.</p>
                                                            <p>Each data provider is passed when <var>FormCollection</var> is created. Then, when the handle method is being called, <var>FormCollection</var> handler creates all form types and passes the data from data providers to them.</p>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Checkout Quote Transfer Lifetime </a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>
                                                                <img src="../../../resources/images/quote_transfer_lifetime.png" title="Click Me" alt="Quote transfer lifetime" class="" />
                                                            </p>
                                                            <p>When a process is being called on <var>StepProcess,</var> it tries to get the current valid step by walking through the step stack and calling the <var>postCondition()</var> for each, starting from the first in the stack. If <var>postCondition()</var> is being called on <var>StepProcess</var>, it tries to get the current valid step by walking through the step stack and calling the <var>postCondition()</var> for each, starting from the first in the stack. If <var>postCondition()</var> failed, then this step is used for later processing. After that, the view variables with <var>QuoteTransfer</var> and form are passed to Twig, and the HTML is rendered.</p>
                                                            <h2>Post Condition</h2>
                                                            <p>Post condition is an essential part of the step Processing. It indicates if a step has all the data that it needs and if its requirements are satisfied. It’s not possible to access the next step from the stack if previous step post conditions are not met, but it’s possible to navigate to any step where post conditions are satisfied (<var>return true</var>).</p>
                                                            <p>Post conditions are called twice per step processing:</p>
                                                            <ul>
                                                                <li class="bullet_list" value="1">To find the current step or if we can access the current step.</li>
                                                                <li class="bullet_list" value="2">After <var>execute()</var>, to make sure the step was completed and that we can continue to the next step.</li>
                                                            </ul>
                                                            <h2>Post Condition Error Route </h2>
                                                            <p>Inside your step, you can set a post condition error route. If you need to redirect to another error route than the one specified during the step construction.</p>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />How the Quote Transfer is Mapped Inside Forms</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>Symfony forms provide a mechanism to store data into objects without needing manual mapping. It’s called <a href="http://symfony.com/doc/current/cookbook/form/data_transformers.html" target="_blank">Data transformers</a>. There are a few important things to make this work. Because we are passing the entire <var>QuoteTransfer</var>, the form handler does not know which fields you are trying to use. Symfony provides a few ways to handle this situation:</p>
                                                            <ul>
                                                                <li class="bullet_list" value="1">using <a href="http://symfony.com/doc/current/reference/forms/types/form.html#property-path" target="_blank">property_path</a> configuration directive<br />It uses the full path to object property you are about to map form into, for example, <var>payment.paypal</var> maps your form to <var>QuoteTransfer:payment:paypal</var>; this works when the property is not on the same level and when you are using subforms.</li>
                                                                <li value="2">
                                                                    <p>using the main form that includes subforms. Each subform has to be configured with the <var>data_class</var> option that is the FQCN of transfer object you are about to use. This works when the property is in the top level.</p>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Checkout Form Submission </a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>On form submission, the same processing starts with the difference that if form submit is detected, then the validation is called:</p>
                                                            <ul>
                                                                <li value="1">if the form is invalid, then the view is rendered with validation errors</li>
                                                                <li value="2">if form data is valid, then <var>execute()</var> is called on the step that executes the step related logic.</li>
                                                            </ul>
                                                            <p>E.g., add the address to QuoteTransfer or get payment details from Zed, call external service etc.</p>
                                                            <p>It’s up to you to decide what to do in each execute method. It’s essential that after <var>execute()</var> runs, the updated returned <var>QuoteTransfer</var> should satisfy the <var>postCondition()</var> so that the <var>StepProcess</var> can take another step from the stack.</p>
                                                            <h2>Required Input </h2>
                                                            <p>Normally each step requires an input from the customer. However, there are cases when there is no need to render a form or a view, but some processing is still required (e.g., <var>PlaceOrderStep</var>, <var>EntryStep</var>). Each step should provide the implementation of the <var>requireInput()</var> method. <var>StepProcess</var> calls this method and reacts accordingly. Again if <var>requireInput()</var> is false, then after running <var>execute()</var> the postConditions should be satisfied.</p>
                                                            <h2>Precondition and Escape Route </h2>
                                                            <p>Preconditions are called before each step; this is a check to indicate that step can’t  be processed in a usual way.</p>
                                                            <p>E.g., the cart is empty. If the <var>preCondition()</var> returns false, the customer is redirected to the escapeRoute provided when configuring the step.</p>
                                                            <h2>External Redirect URL </h2>
                                                            <p>Sometimes it’s needed to redirect the customer to an external URL (outside application). The step should implement <var>StepWithExternalRedirectInterface::getExternalRedirectUrl()</var> which returns the URL to redirect customer after <var>execute()</var> is ran.</p>
                                                            <p class="important">Each step must implement StepInterface.</p>
                                                            <p>
                                                                <img src="../../../resources/images/step_flow.png" title="Click Me" alt="Step Flow" class="" />
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Placing the Order</a></span>
                                                        <div class="MCDropDownBody dropDownBody">
                                                            <p>After the customer clicks the submit button during the <var>SummaryStep</var>, the <var>PlaceOrderStep</var> is started. This step takes the <var>QuoteTransfer</var> and starts the checkout workflow to store the order into the system. Zed Checkout module contains some plugins where you can add additional behavior, check preconditions, save or execute post condition check.</p>
                                                            <h2><a name="Plugins"></a>Plugins</h2>
                                                            <p>Zed's Checkout module contains four types of plugins to extend the behavior on placing an order. Any plugin has access to <var>QuoteTransfer</var> that is supposed to be read-only and <a href="#checkout_response_transfer">CheckoutResponseTransfer</a> data object that can be modified.</p>
                                                            <ul>
                                                                <li class="bullet_list" value="1">PreCondition — is for checking if the order satisfies predefined constraints (e.g., if the quantity of items is still available).</li>
                                                                <li class="bullet_list" value="2">OrderSavers — is for saving the order, each plugin is responsible for collecting certain parts of the order (sales module saves items, discount module saves discounts, product option module saves options etc.). Each <var>OrderSaver</var> plugin is wrapped into a single transaction; if an exception is being thrown, the transaction is rolled back.</li>
                                                                <li class="bullet_list" value="3">CheckPostConditions — is for checking conditions after saving, last time to react if something did not happen by the plan. It’s called after state machine execution.</li>
                                                                <li value="4">
                                                                    <p>PostSaveHook — is called after order placement, sets the success flag to false, if redirect should be headed to an error page afterward.</p>
                                                                </li>
                                                            </ul>
                                                            <h2><a name="checkout_response_transfer"></a>Checkout Response Transfer</h2>
                                                            <ul>
                                                                <li class="bullet_list" value="1">isSuccess (bool) — indicates if the checkout process was successful.</li>
                                                                <li class="bullet_list" value="2">errors (<a href="#checkout_error_transfer">CheckoutErrorTransfer</a>) — list of errors that occurred during execution of the plugins.</li>
                                                                <li class="bullet_list" value="3">isExternalRedirect (bool) — specifies if the redirect, after the successful order placement is external.</li>
                                                                <li class="bullet_list" value="4">redirectUrl (string) — URL to redirect customer after the order was placed successfully.</li>
                                                                <li class="bullet_list" value="5">saveOrder (<a href="#save_order_transfer">SaveOrderTransfer</a>) — stores ids of the items that OrderSaver plugins have saved.</li>
                                                            </ul>
                                                            <h2><a name="checkout_error_transfer"></a>Checkout Error Transfer</h2>
                                                            <ul>
                                                                <li class="bullet_list" value="1">errorCode (int) — numeric error code. The checkout error codes are listed below.</li>
                                                                <li class="bullet_list" value="2">message (string) — error message.</li>
                                                            </ul>
                                                            <h2><a name="checkout_error_codes"></a>Checkout Error Codes</h2>
                                                            <ul>
                                                                <li class="bullet_list" value="1">4001 — customer email already used.</li>
                                                                <li class="bullet_list" value="2">4002 — product unavailable.</li>
                                                                <li class="bullet_list" value="3">4003 — cart amount does not match.</li>
                                                                <li class="bullet_list" value="4">5000 — unknown error.</li>
                                                            </ul>
                                                            <h2><a name="save_order_transfer"></a>Save Order Transfer</h2>
                                                            <ul>
                                                                <li class="bullet_list" value="1">idSalesOrder (int) — ID of the current saved order.</li>
                                                                <li class="bullet_list" value="2">orderReference (string) — an auto-generated ID of the order.</li>
                                                                <li class="bullet_list" value="3">orderItems (ItemTransfer) — saved order items.</li>
                                                            </ul>
                                                            <p>There are already some plugins implemented with each of those types:</p>
                                                            <h2>Precondition Plugins</h2>
                                                            <ul>
                                                                <li class="bullet_list" value="1"><var>CustomerPreConditionCheckerPlugin</var> — Checks if the email of the customer is already used.</li>
                                                                <li class="bullet_list" value="2"><var>ProductsAvailableCheckoutPreConditionPlugin </var>— Check if the items contained in the cart are in stock.</li>
                                                            </ul>
                                                            <h2>Postcondition Plugins</h2>
                                                            <ul>
                                                                <li class="bullet_list" value="1"><var>OrderCustomerSavePlugin</var> — save/create a customer in the database if the customer is new or the ID is not set (guest customer is ignored).</li>
                                                                <li class="bullet_list" value="2"><var>SalesOrderSaverPlugin</var> — saves order information, creates sales_order and sales_order_item table.</li>
                                                                <li class="bullet_list" value="3"><var>ProductOptionOrderSaverPlugin</var> — saves product options to sales_product_item table.</li>
                                                                <li class="bullet_list" value="4"><var>DiscountOrderSavePlugin</var> — save order discounts to the sales_discounts table.</li>
                                                                <li class="bullet_list" value="5"><var>OrderShipmentSavePlugin</var> — saves order shipment information to sales_expense table.</li>
                                                            </ul>
                                                            <h2>Pre Save Condition Plugin</h2>
                                                            <ul>
                                                                <li value="1"><var>SalesOrderExpanderPlugin</var> — expands items by quantity and recalculate quote.</li>
                                                            </ul>
                                                            <h2>State Machine</h2>
                                                            <p>A state machine is triggered in the <var>CheckoutWorkflow</var> class from the Checkout module; the execution starts after pre-condition and order saver plugins store no errors into <a href="#checkout_response_transfer">CheckoutResponseTransfer</a>.</p>
                                                            <p>The state machine trigger needs a name in order to be executed. The name is set by <var>SalesOrderSaverPlugin</var> in the Sales module. Each project has to implement <var>SalesConfig::determineProcessForOrderItem()</var> method, which should return the state machine name for the selected order item. E.g., Payolution payment would return PayolutionPayment01.</p>
                                                        </div>
                                                    </div>
                                                    <p>&#160;</p>
                                                    <p><i>Last review date: Jan 18, 2019</i>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div><a class="scroll-top js-scroll-top" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill="#FFF" fill-rule="nonzero" d="M11.82 5.22a.54.54 0 0 1 0 .806.636.636 0 0 1-.852 0L6.607 1.937v13.49a.587.587 0 0 1-.602.573c-.336 0-.611-.258-.611-.573V1.937L1.04 6.026a.647.647 0 0 1-.86 0 .54.54 0 0 1 0-.807L5.573.163a.636.636 0 0 1 .852 0L11.82 5.22z" /></svg></a>
                                <script>/* <![CDATA[ */
			function createGithubUrl() {
			var GITHUB_CONTENT_PATH = '/blob/master/public';
			var link = document.querySelector('.js-widget-github-link');
			var href =
			link.getAttribute('href')
			+ GITHUB_CONTENT_PATH
			+ window.location.pathname;
			link.setAttribute('href', href);
			}
			createGithubUrl();
		/* ]]> */</script>
                                <script>/* <![CDATA[ */
			requirejs.config({
				appDir: '',
				paths: {
					'clipboard': ['https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min']
					
				}
			});
			require(['clipboard'], function(Clipboard) {
				console.log(Clipboard);
				window.Clipboard = Clipboard;
			});
		/* ]]> */</script>
                                <script src="../../../resources/scripts/perfect-scrollbar.js">
                                </script>
                                <script src="../../../resources/scripts/imagemapster.js">
                                </script>
                                <script src="../../../resources/scripts/script.js">
                                </script>
                                <script src="../../../resources/scripts/prism.js">
                                </script>
                            </div>
                        </div>
                    </section><a data-close="true"></a>
                </div>
            </div>
            <script>/* <![CDATA[ */$(document).foundation();/* ]]> */</script>
        </div>
    </body>
</html>
