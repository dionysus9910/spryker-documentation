<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="Spryker.B2B,Spryker.B2C,Spryker.ShopSuite,Spryker.DemoShop">
    <head><title>User and Rights Management | Spryker</title>
        <meta name="description" content="In Spryker Commerce OS user and rights management is implemented in the three bundles - ACL, Auth and User. Users can be assigned to different gorups while groups can have different roles. Roles in their turn have resources assigned to them which identify what rights users have. Zed allows you to manage all of the three bundles - ACL, Auth and User. There are corresponding tabs for that.  " />
    </head>
    <body>
        <h1>User and Rights Management <img src="../../Resources/Images/shoptype/B2B_Shop.png" /> <img src="../../Resources/Images/shoptype/B2C_Shop.png" /> <img src="../../Resources/Images/shoptype/MasterSuite.png" /> <img src="../../Resources/Images/shoptype/Demoshop.png" /></h1>
        <p MadCap:conditions="General.Hidden Comment">used to be: http://spryker.github.io/core/bundles/user-rights-management/</p>
        <p>User and rights management is a general term that describes the security functionality for controlling user access to perform various roles throughout the system. </p>
        <p>In the Spryker Commerce OS user and rights management is implemented in the following three bundles:</p>
        <ol>
            <li><strong>ACL</strong> - ACL stands for Access Control List. This is where you can manage your roles, groups, privileges and resources.</li>
            <li><strong>Auth</strong> - manages the authorization of a specific user by returning true or false if the credentials are allowed to access the system or not. It is used for login, logout, and used by the login controller to verify if a given user token is authenticated. Login is authenticated with a form or a header (via token). Auth is also used to validate that Zed has authorization to process incoming requests from Yves or 3rd parties such as payment providers.</li>
            <li><strong>User</strong> - Allows to create users and assign them to groups. Each group contains a set of roles.</li>
        </ol>
        <h2>Users and Customers</h2>
        <p>It is important to distinguish between users and customers. A user works with the back-end side of the store and handles the store maintenance such as creating users and assigning them to roles that will allow them to perform actions such as editing the CMS, activating and deactivating products and managing discounts. A customer on the other hand is the final consumer of the online store i.e. the person who places orders. Customers are also managed in Zed but in a different section.</p>
        <p>Users are assigned to groups. Groups are a collection of Roles e.g. customer-care, root, 3rd party etc. Roles have Resources (rules) assigned to them. Resources (rules) are used to assign specific privileges to a Role for example, a Sales Representative Role or a System Administrator Role. Resources are always /<var>module/controller/action</var> and you can use * as placeholder.</p>
        <ul>
            <li class="bullet_list"><var>/customer/*/*</var> would mean everything in /customer.</li>
            <li class="bullet_list"><var>/customer/view/*</var> would mean a user can only see customers but can’t edit them.</li>
        </ul>
        <h2>Managing Users</h2>
        <p>The Auth, ACL and User bundles are configured and managed through the Zed user interface. Bundles correspond with the tabs in Zed. You can find which name you should place here from the file <var>/project/config/Zed/navigation.xml</var></p>
        <p><a name="Also,"></a>Also, you can find bundle names as well as controllers and actions in the file <var>communication/navigation.xml</var>. For example:</p>
        <p>
            <img src="../../Resources/Images/bundles_navigation.png" />
        </p> <p>Learn to create and manage Users, Groups and Roles in <a href="https://documentation.spryker.com/administration_interface_guide/users_control/users-control.htm"><a href="file:///C:/Dev/academy-sandbox/Spryker Administration Interface Guide/Content/Administration Interface Guide/Users Control/users-control.htm">Users Control Manual</a></a>.</p><h2 MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03">ACL Configuration</h2><p MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03">Apart from being able to configure user access to Zed resources via Zed UI, you can grant access to additional resources by specifying them in <var>config_*.php</var>. The following options are used to do that:</p><ul><li MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03"><var>AclConstants::ACL_DEFAULT_RULES</var> - is used to provide/restrict access to Zed resources, defined in the <var>Spryker\Zed\Auth\AuthConfig::$ingorable</var> property. For example:</li><pre MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03"><code class="language-PHP line-numbers">
$config[AclConstants::ACL_DEFAULT_RULES] = [
    // ....
    [
        'bundle' =&gt; 'auth',
        'controller' =&gt; 'login',
        'action' =&gt; 'index',
        'type' =&gt; 'deny',
    ],
    // ....
];</code></pre><p MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03">In the example, we restrict access for everyone to Zed login page. This option affects both logged-in and anonymous users. The key feature is the ability to restrict/provide access for anonymous users.</p><li MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03"><var>AclConstants::ACL_USER_RULE_WHITELIST</var> -  is used to provide additional access to Zed resources for all logged-in users. For example:</li><pre MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03"><code class="language-PHP line-numbers">
$config[AclConstants::ACL_USER_RULE_WHITELIST] = [
    // ....
    [
        'bundle' =&gt; 'application',
        'controller' =&gt; '*',
        'action' =&gt; '*',
        'type' =&gt; 'allow',
    ],
    // ....
];</code></pre><p MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03">In the example, we grant access to the Application module resources for all users.</p><p class="note" MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03">With the configuration provided in the example, users are granted access to these resources regardless of ACL configuration in ZED UI.</p><li MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03"><var>AclConstants::ACL_DEFAULT_CREDENTIALS</var> - is used to provide additional access to Zed resources for a specific user. For example:</li><pre MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03"><code class="language-PHP line-numbers">
$config[AclConstants::ACL_DEFAULT_CREDENTIALS] = [
    'winner@spryker.com' =&gt; [
        'rules' =&gt; [
            [
                'bundle' =&gt; '*',
                'controller' =&gt; '*',
                'action' =&gt; '*',
                'type' =&gt; 'allow',
            ],
        ],
    ],
]</code></pre><p MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03">In the example, we grant the user <b>winner@spryker.com</b> access to all Zed resources. To make it work, we should also add <b>winner@spryker.com</b> to this option: <var>`UserConstants::USER_SYSTEM_USERS`</var>. Here, a system user is any user who has additional ACL rules defined for them in <var>config_*.php</var> file.</p><li MadCap:conditions="Spryker.2019-02,ReleaseVersions.2019-03">Note that if there is at least one <var>allow</var> type for a resource, the user will have access to it in spite of having a <var>deny</var> type for the same resource. It works for <var>`AclConstants::ACL_USER_RULE_WHITELIST`</var>, <var>`AclConstants::ACL_DEFAULT_CREDENTIALS`</var> and rules configured via Zed UI, except for <var>`AclConstants::ACL_DEFAULT_RULES`</var> as it is handled before checking if user logged in or not.</li></ul></body>
</html>