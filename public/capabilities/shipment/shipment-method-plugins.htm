<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="" MadCap:conditions="Spryker.B2B,Spryker.B2C">
    <head>
    </head>
    <body>
        <h1>Shipment Method Plugins <img src="../../Resources/Images/shoptype/B2B_Shop.png" /> <img src="../../Resources/Images/shoptype/B2C_Shop.png" /></h1>
        <p>
            <MadCap:popup>
                <MadCap:popupHead>ML</MadCap:popupHead>
                <MadCap:popupBody>Multi-language</MadCap:popupBody>
            </MadCap:popup> <MadCap:popup><MadCap:popupHead>MS</MadCap:popupHead><MadCap:popupBody>Multi-store</MadCap:popupBody></MadCap:popup> <MadCap:popup><MadCap:popupHead>MC</MadCap:popupHead><MadCap:popupBody>Multi-currency</MadCap:popupBody></MadCap:popup></p>
        <p>The main concerns regarding shipping services are :</p>
        <ul>
            <li class="bullet_list"><strong>Availability</strong>: Is the shipping method available to deliver the order?</li>
            <li class="bullet_list"><strong>Price</strong>: How is the delivery price calculated ?</li>
            <li class="bullet_list"><strong>Delivery time</strong>: When will the order be delivered ?</li>
        </ul>
        <p>For each of these concerns, an optional plugin is linked to each shipping method :</p>
        <ul>
            <li class="bullet_list"><strong>Availability Plugin</strong>: Returns a boolean value which implies if the active shipping method is available and should be visible to the customers in the list of available shipping services.</li>
            <li class="bullet_list"><strong>Price Calculation Plugin</strong>: Shipping services can consider different criteria in calculating the price for delivery (such as size of the package, weight, etc.). When a price plugin is paired to a shipping method, the related Zed Admin UI preconfigured prices are omitted.</li>
            <li class="bullet_list"><strong>Delivery Time Plugin</strong>: The estimated delivery time information of the purchased items is important for the customers. The delivery time can vary depending on region, shipping service type, or day of week. Delivery time is measured in seconds as integer (for example,1 day = 86400; 5 days = 5 * 86400).</li>
        </ul>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Availability Plugin</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>For each availability plugin linked to a shipment method, a class with the same name must exist on the project side in the Shipment module(<var>Pyz/Zed/Shipment/Communication/Plugin/Availability</var>).</p>
                <p>The class must implement <var>ShipmentMethodAvailabilityPluginInterface</var> and must extend <var>AbstractPlugin</var> class, as in the example below :</p><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\Shipment\Communication\Plugin\Availability;
 
use Generated\Shared\Transfer\QuoteTransfer;
use Spryker\Zed\Kernel\Communication\AbstractPlugin;
use Spryker\Zed\Shipment\Communication\Plugin\ShipmentMethodAvailabilityPluginInterface;
 
class DHLExpressPlugin extends AbstractPlugin implements ShipmentMethodAvailabilityPluginInterface
{
 
    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $transfer
     *
     * @return bool
     */
    public function isAvailable(QuoteTransfer $transfer)
    {
        //..
    }
 
}</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Price Calculation Plugin</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>For each price calculation plugin linked to a shipment method, a class with the same name must exist on the project side in the Shipment module (<var>Pyz/Zed/Shipment/Communication/Plugin/PriceCalculation</var>). The class must implement <var>ShipmentMethodPricePluginInterface</var> and must extend <var>AbstractPlugin</var> class, as in the example below :</p><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\Shipment\Communication\Plugin\PriceCalculation;
 

use Generated\Shared\Transfer\QuoteTransfer;
use Spryker\Zed\Kernel\Communication\AbstractPlugin;
use Spryker\Zed\Shipment\Communication\Plugin\ShipmentMethodPricePluginInterface;
 
class DHLExpressPlugin extends AbstractPlugin implements ShipmentMethodPricePluginInterface
{
 
    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $transfer
     *
     * @return int
     */
    public function getPrice(QuoteTransfer $transfer)
    {
       //..
    }
 
}</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Delivery Time Plugin</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>For each availability plugin linked to a shipment method, a class with the same name must exist on the project side in the Shipment module (<var>Pyz/Zed/Shipment/Communication/Plugin/DeliveryTime</var>). The class must implement <var>ShipmentMethodDeliveryTimePluginInterface</var> and must extend <var>AbstractPlugin</var> class, as in the example below :</p><pre><code class="language-PHP line-numbers">&lt;?php
namespace Pyz\Zed\Shipment\Communication\Plugin\DeliveryTime;
 
use Generated\Shared\Transfer\QuoteTransfer;
use Spryker\Zed\Kernel\Communication\AbstractPlugin;
use Spryker\Zed\Shipment\Communication\Plugin\ShipmentMethodDeliveryTimePluginInterface;
 
class DHLExpressPlugin extends AbstractPlugin implements ShipmentMethodDeliveryTimePluginInterface
{

    /**
     * @param \Generated\Shared\Transfer\QuoteTransfer $transfer
     *
     * @return int
     */
    public function getTime(QuoteTransfer $transfer)
    {
        //..
    }
 
}</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Plugin Registration</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p>The plugins must be registered in the ShipmentDependencyProvider, by overriding the following 3 operations :</p><pre><code class="language-PHP line-numbers">&lt;?php
/**
 * @param Container $container
 *
 * @return array
 */
protected function getAvailabilityPlugins(Container $container)
{
    return [
        'Plugin name visible in form' =&gt; new YourAvailabilityPlugin(),
    ];
}
 
/**
 * @param Container $container
 *
 * @return array
 */
protected function getPricePlugins(Container $container)
{
    return [
        'Plugin name visible in form' =&gt; new YourPricePlugin(),
    ];
}
 
/**
 * @param Container $container
 *
 * @return array
 */
protected function getDeliveryTimePlugins(Container $container)
{
    return [
        'Plugin name visible in form' =&gt; new YourDeliveryTimePlugin(),
    ];
}</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p>&#160;</p>
        <p><b>See also:</b>
        </p>
        <ul>
            <li><a href="shipment.htm">Getting a general idea of the Shipment feature</a>
            </li>
            <li><a href="shipment-module-overview.htm">Getting a overview of the Shipment module</a>
            </li>
            <li><a href="http://documentation.spryker.com/module_migration_guides/mg-shipment.htm">Migrating to a newer version of the Shipment module</a>
            </li>
            <li><a href="http://documentation.spryker.com/tutorials/howtos/ht-add-new-shipment-method-2.htm">Adding a new shipment method</a>
            </li>
        </ul>
        <p>&#160;</p>
        <MadCap:snippetBlock src="../../Resources/Snippets/thank_you_note.flsnp" />
        <p>&#160;</p>
        <p><![CDATA[
		
		]]><i>Last review date: Oct. 27th, 2017 </i><MadCap:conditionalText MadCap:conditions="General.Hidden Comment"><i>by Karoly Gerner</i></MadCap:conditionalText><![CDATA[    ]]></p>
    </body>
</html>